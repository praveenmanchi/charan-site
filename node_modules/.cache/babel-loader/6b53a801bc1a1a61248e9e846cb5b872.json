{"ast":null,"code":"'use client';\n\nimport * as React from 'react';\nimport { IMAGE_FIT_COVER, IMAGE_FIT_CONTAIN, ACTION_CLOSE, MODULE_CONTROLLER, UNKNOWN_ACTION_TYPE, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_CANCEL, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_WHEEL, SLIDE_STATUS_LOADING, activeSlideStatus, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_PLACEHOLDER, ACTION_PREV, ACTION_NEXT, ACTION_SWIPE, MODULE_PORTAL, CLASS_FLEX_CENTER, MODULE_CAROUSEL, CLASS_SLIDE_WRAPPER, VK_ARROW_RIGHT, VK_ARROW_LEFT, VK_ESCAPE, MODULE_NAVIGATION, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, MODULE_NO_SCROLL, MODULE_ROOT, MODULE_TOOLBAR } from './types.js';\nimport { createPortal } from 'react-dom';\nexport { ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_ERROR, ACTIVE_SLIDE_LOADING, ACTIVE_SLIDE_PLAYING, CLASS_FULLSIZE, PLUGIN_CAPTIONS, PLUGIN_COUNTER, PLUGIN_DOWNLOAD, PLUGIN_FULLSCREEN, PLUGIN_INLINE, PLUGIN_SHARE, PLUGIN_SLIDESHOW, PLUGIN_THUMBNAILS, PLUGIN_ZOOM, SLIDE_STATUS_PLAYING } from './types.js';\n\nconst clsx = function () {\n  for (var _len = arguments.length, classes = new Array(_len), _key = 0; _key < _len; _key++) {\n    classes[_key] = arguments[_key];\n  }\n\n  return [...classes].filter(cls => Boolean(cls)).join(\" \");\n};\n\nconst cssPrefix$3 = \"yarl__\";\n\nconst cssClass = name => `${cssPrefix$3}${name}`;\n\nconst cssVar = name => `--${cssPrefix$3}${name}`;\n\nconst composePrefix = (base, prefix) => `${base}${prefix ? `_${prefix}` : \"\"}`;\n\nconst makeComposePrefix = base => prefix => composePrefix(base, prefix);\n\nconst label = (labels, lbl) => labels && labels[lbl] ? labels[lbl] : lbl;\n\nconst cleanup = function () {\n  for (var _len2 = arguments.length, cleaners = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    cleaners[_key2] = arguments[_key2];\n  }\n\n  return () => {\n    cleaners.forEach(cleaner => {\n      cleaner();\n    });\n  };\n};\n\nconst makeUseContext = (name, contextName, context) => () => {\n  const ctx = React.useContext(context);\n\n  if (!ctx) {\n    throw new Error(`${name} must be used within a ${contextName}.Provider`);\n  }\n\n  return ctx;\n};\n\nconst hasWindow = () => typeof window !== \"undefined\";\n\nfunction round(value) {\n  let decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  const factor = 10 ** decimals;\n  return Math.round((value + Number.EPSILON) * factor) / factor;\n}\n\nconst isImageSlide = slide => slide.type === undefined || slide.type === \"image\";\n\nconst isImageFitCover = (image, imageFit) => image.imageFit === IMAGE_FIT_COVER || image.imageFit !== IMAGE_FIT_CONTAIN && imageFit === IMAGE_FIT_COVER;\n\nfunction parseInt(value) {\n  return typeof value === \"string\" ? Number.parseInt(value, 10) : value;\n}\n\nfunction parseLengthPercentage(input) {\n  if (typeof input === \"number\") {\n    return {\n      pixel: input\n    };\n  }\n\n  if (typeof input === \"string\") {\n    const value = parseInt(input);\n    return input.endsWith(\"%\") ? {\n      percent: value\n    } : {\n      pixel: value\n    };\n  }\n\n  return {\n    pixel: 0\n  };\n}\n\nfunction computeSlideRect(containerRect, padding) {\n  const paddingValue = parseLengthPercentage(padding);\n  const paddingPixels = paddingValue.percent !== undefined ? containerRect.width / 100 * paddingValue.percent : paddingValue.pixel;\n  return {\n    width: Math.max(containerRect.width - 2 * paddingPixels, 0),\n    height: Math.max(containerRect.height - 2 * paddingPixels, 0)\n  };\n}\n\nconst devicePixelRatio = () => (hasWindow() ? window === null || window === void 0 ? void 0 : window.devicePixelRatio : undefined) || 1;\n\nconst getSlideIndex = (index, slidesCount) => slidesCount > 0 ? (index % slidesCount + slidesCount) % slidesCount : 0;\n\nconst hasSlides = slides => slides.length > 0;\n\nconst getSlide = (slides, index) => slides[getSlideIndex(index, slides.length)];\n\nconst getSlideIfPresent = (slides, index) => hasSlides(slides) ? getSlide(slides, index) : undefined;\n\nfunction addToolbarButton(toolbar, key, button) {\n  if (!button) return toolbar;\n  const {\n    buttons,\n    ...restToolbar\n  } = toolbar;\n  const index = buttons.findIndex(item => item === key);\n  const buttonWithKey = React.isValidElement(button) ? React.cloneElement(button, {\n    key\n  }, null) : button;\n\n  if (index >= 0) {\n    const result = [...buttons];\n    result.splice(index, 1, buttonWithKey);\n    return {\n      buttons: result,\n      ...restToolbar\n    };\n  }\n\n  return {\n    buttons: [buttonWithKey, ...buttons],\n    ...restToolbar\n  };\n}\n\nfunction stopNavigationEventsPropagation() {\n  const stopPropagation = event => {\n    event.stopPropagation();\n  };\n\n  return {\n    onPointerDown: stopPropagation,\n    onKeyDown: stopPropagation,\n    onWheel: stopPropagation\n  };\n}\n\nfunction calculatePreload(carousel, slides) {\n  let minimum = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return Math.min(carousel.preload, Math.max(carousel.finite ? slides.length - 1 : Math.floor(slides.length / 2), minimum));\n}\n\nconst LightboxDefaultProps = {\n  open: false,\n  close: () => {},\n  index: 0,\n  slides: [],\n  render: {},\n  plugins: [],\n  toolbar: {\n    buttons: [ACTION_CLOSE]\n  },\n  labels: {},\n  animation: {\n    fade: 250,\n    swipe: 500,\n    easing: {\n      fade: \"ease\",\n      swipe: \"ease-out\",\n      navigation: \"ease-in-out\"\n    }\n  },\n  carousel: {\n    finite: false,\n    preload: 2,\n    padding: \"16px\",\n    spacing: \"30%\",\n    imageFit: IMAGE_FIT_CONTAIN,\n    imageProps: {}\n  },\n  controller: {\n    ref: null,\n    focus: true,\n    aria: false,\n    touchAction: \"none\",\n    closeOnPullUp: false,\n    closeOnPullDown: false,\n    closeOnBackdropClick: false\n  },\n  portal: {},\n  noScroll: {\n    disabled: false\n  },\n  on: {},\n  styles: {},\n  className: \"\"\n};\n\nfunction createModule(name, component) {\n  return {\n    name,\n    component\n  };\n}\n\nfunction createNode(module, children) {\n  return {\n    module,\n    children\n  };\n}\n\nfunction traverseNode(node, target, apply) {\n  if (node.module.name === target) {\n    return apply(node);\n  }\n\n  if (node.children) {\n    return [createNode(node.module, node.children.flatMap(n => {\n      var _a;\n\n      return (_a = traverseNode(n, target, apply)) !== null && _a !== void 0 ? _a : [];\n    }))];\n  }\n\n  return [node];\n}\n\nfunction traverse(nodes, target, apply) {\n  return nodes.flatMap(node => {\n    var _a;\n\n    return (_a = traverseNode(node, target, apply)) !== null && _a !== void 0 ? _a : [];\n  });\n}\n\nfunction withPlugins(root) {\n  let plugins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let augmentations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  let config = root;\n\n  const contains = target => {\n    const nodes = [...config];\n\n    while (nodes.length > 0) {\n      const node = nodes.pop();\n      if ((node === null || node === void 0 ? void 0 : node.module.name) === target) return true;\n      if (node === null || node === void 0 ? void 0 : node.children) nodes.push(...node.children);\n    }\n\n    return false;\n  };\n\n  const addParent = (target, module) => {\n    if (target === \"\") {\n      config = [createNode(module, config)];\n      return;\n    }\n\n    config = traverse(config, target, node => [createNode(module, [node])]);\n  };\n\n  const append = (target, module) => {\n    config = traverse(config, target, node => [createNode(node.module, [createNode(module, node.children)])]);\n  };\n\n  const addChild = (target, module, precede) => {\n    config = traverse(config, target, node => {\n      var _a;\n\n      return [createNode(node.module, [...(precede ? [createNode(module)] : []), ...((_a = node.children) !== null && _a !== void 0 ? _a : []), ...(!precede ? [createNode(module)] : [])])];\n    });\n  };\n\n  const addSibling = (target, module, precede) => {\n    config = traverse(config, target, node => [...(precede ? [createNode(module)] : []), node, ...(!precede ? [createNode(module)] : [])]);\n  };\n\n  const addModule = module => {\n    append(MODULE_CONTROLLER, module);\n  };\n\n  const replace = (target, module) => {\n    config = traverse(config, target, node => [createNode(module, node.children)]);\n  };\n\n  const remove = target => {\n    config = traverse(config, target, node => node.children);\n  };\n\n  const augment = augmentation => {\n    augmentations.push(augmentation);\n  };\n\n  plugins.forEach(plugin => {\n    plugin({\n      contains,\n      addParent,\n      append,\n      addChild,\n      addSibling,\n      addModule,\n      replace,\n      remove,\n      augment\n    });\n  });\n  return {\n    config,\n    augmentation: props => augmentations.reduce((acc, augmentation) => augmentation(acc), props)\n  };\n}\n\nconst EventsContext = React.createContext(null);\nconst useEvents = makeUseContext(\"useEvents\", \"EventsContext\", EventsContext);\n\nfunction EventsProvider(_ref) {\n  let {\n    children\n  } = _ref;\n  const [subscriptions] = React.useState({});\n  React.useEffect(() => () => {\n    Object.keys(subscriptions).forEach(topic => delete subscriptions[topic]);\n  }, [subscriptions]);\n  const context = React.useMemo(() => {\n    const unsubscribe = (topic, callback) => {\n      var _a;\n\n      (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.splice(0, subscriptions[topic].length, ...subscriptions[topic].filter(cb => cb !== callback));\n    };\n\n    const subscribe = (topic, callback) => {\n      if (!subscriptions[topic]) {\n        subscriptions[topic] = [];\n      }\n\n      subscriptions[topic].push(callback);\n      return () => unsubscribe(topic, callback);\n    };\n\n    const publish = function () {\n      for (var _len3 = arguments.length, _ref2 = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        _ref2[_key3] = arguments[_key3];\n      }\n\n      let [topic, event] = _ref2;\n\n      var _a;\n\n      (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.forEach(callback => callback(event));\n    };\n\n    return {\n      publish,\n      subscribe,\n      unsubscribe\n    };\n  }, [subscriptions]);\n  return React.createElement(EventsContext.Provider, {\n    value: context\n  }, children);\n}\n\nconst LightboxPropsContext = React.createContext(null);\nconst useLightboxProps = makeUseContext(\"useLightboxProps\", \"LightboxPropsContext\", LightboxPropsContext);\n\nfunction LightboxPropsProvider(_ref3) {\n  let {\n    children,\n    ...props\n  } = _ref3;\n  return React.createElement(LightboxPropsContext.Provider, {\n    value: props\n  }, children);\n}\n\nconst LightboxStateContext = React.createContext(null);\nconst useLightboxState = makeUseContext(\"useLightboxState\", \"LightboxStateContext\", LightboxStateContext);\nconst LightboxDispatchContext = React.createContext(null);\nconst useLightboxDispatch = makeUseContext(\"useLightboxDispatch\", \"LightboxDispatchContext\", LightboxDispatchContext);\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"swipe\":\n      {\n        const {\n          slides\n        } = state;\n        const increment = (action === null || action === void 0 ? void 0 : action.increment) || 0;\n        const globalIndex = state.globalIndex + increment;\n        const currentIndex = getSlideIndex(globalIndex, slides.length);\n        const currentSlide = getSlideIfPresent(slides, currentIndex);\n        const animation = increment || action.duration ? {\n          increment,\n          duration: action.duration,\n          easing: action.easing\n        } : undefined;\n        return {\n          slides,\n          currentIndex,\n          globalIndex,\n          currentSlide,\n          animation\n        };\n      }\n\n    case \"update\":\n      if (action.slides !== state.slides || action.index !== state.currentIndex) {\n        return {\n          slides: action.slides,\n          currentIndex: action.index,\n          globalIndex: action.index,\n          currentSlide: getSlideIfPresent(action.slides, action.index)\n        };\n      }\n\n      return state;\n\n    default:\n      throw new Error(UNKNOWN_ACTION_TYPE);\n  }\n}\n\nfunction LightboxStateProvider(_ref4) {\n  let {\n    slides,\n    index,\n    children\n  } = _ref4;\n  const [state, dispatch] = React.useReducer(reducer, {\n    slides,\n    currentIndex: index,\n    globalIndex: index,\n    currentSlide: getSlideIfPresent(slides, index)\n  });\n  React.useEffect(() => {\n    dispatch({\n      type: \"update\",\n      slides,\n      index\n    });\n  }, [slides, index]);\n  const context = React.useMemo(() => ({ ...state,\n    state,\n    dispatch\n  }), [state, dispatch]);\n  return React.createElement(LightboxDispatchContext.Provider, {\n    value: dispatch\n  }, React.createElement(LightboxStateContext.Provider, {\n    value: context\n  }, children));\n}\n\nconst TimeoutsContext = React.createContext(null);\nconst useTimeouts = makeUseContext(\"useTimeouts\", \"TimeoutsContext\", TimeoutsContext);\n\nfunction TimeoutsProvider(_ref5) {\n  let {\n    children\n  } = _ref5;\n  const [timeouts] = React.useState([]);\n  React.useEffect(() => () => {\n    timeouts.forEach(tid => window.clearTimeout(tid));\n    timeouts.splice(0, timeouts.length);\n  }, [timeouts]);\n  const context = React.useMemo(() => {\n    const removeTimeout = id => {\n      timeouts.splice(0, timeouts.length, ...timeouts.filter(tid => tid !== id));\n    };\n\n    const setTimeout = (fn, delay) => {\n      const id = window.setTimeout(() => {\n        removeTimeout(id);\n        fn();\n      }, delay);\n      timeouts.push(id);\n      return id;\n    };\n\n    const clearTimeout = id => {\n      if (id !== undefined) {\n        removeTimeout(id);\n        window.clearTimeout(id);\n      }\n    };\n\n    return {\n      setTimeout,\n      clearTimeout\n    };\n  }, [timeouts]);\n  return React.createElement(TimeoutsContext.Provider, {\n    value: context\n  }, children);\n}\n\nconst IconButton = React.forwardRef(function IconButton(_ref6, ref) {\n  let {\n    label: label$1,\n    className,\n    icon: Icon,\n    renderIcon,\n    onClick,\n    style,\n    ...rest\n  } = _ref6;\n  const {\n    styles,\n    labels\n  } = useLightboxProps();\n  return React.createElement(\"button\", {\n    ref: ref,\n    type: \"button\",\n    \"aria-label\": label(labels, label$1),\n    className: clsx(cssClass(ELEMENT_BUTTON), className),\n    onClick: onClick,\n    style: { ...style,\n      ...styles.button\n    },\n    ...rest\n  }, renderIcon ? renderIcon() : React.createElement(Icon, {\n    className: cssClass(ELEMENT_ICON),\n    style: styles.icon\n  }));\n});\n\nfunction svgIcon(name, children) {\n  const icon = props => React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    height: \"24\",\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    ...props\n  }, children);\n\n  icon.displayName = name;\n  return icon;\n}\n\nfunction createIcon(name, glyph) {\n  return svgIcon(name, React.createElement(\"g\", {\n    fill: \"currentColor\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), glyph));\n}\n\nfunction createIconDisabled(name, glyph) {\n  return svgIcon(name, React.createElement(React.Fragment, null, React.createElement(\"defs\", null, React.createElement(\"mask\", {\n    id: \"strike\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"white\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0L24 24\",\n    stroke: \"black\",\n    strokeWidth: 4\n  }))), React.createElement(\"path\", {\n    d: \"M0.70707 2.121320L21.878680 23.292883\",\n    stroke: \"currentColor\",\n    strokeWidth: 2\n  }), React.createElement(\"g\", {\n    fill: \"currentColor\",\n    mask: \"url(#strike)\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), glyph)));\n}\n\nconst CloseIcon = createIcon(\"Close\", React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}));\nconst PreviousIcon = createIcon(\"Previous\", React.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}));\nconst NextIcon = createIcon(\"Next\", React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}));\nconst LoadingIcon = createIcon(\"Loading\", React.createElement(React.Fragment, null, Array.from({\n  length: 8\n}).map((_, index, array) => React.createElement(\"line\", {\n  key: index,\n  x1: \"12\",\n  y1: \"6.5\",\n  x2: \"12\",\n  y2: \"1.8\",\n  strokeLinecap: \"round\",\n  strokeWidth: \"2.6\",\n  stroke: \"currentColor\",\n  strokeOpacity: 1 / array.length * (index + 1),\n  transform: `rotate(${360 / array.length * index}, 12, 12)`\n}))));\nconst ErrorIcon = createIcon(\"Error\", React.createElement(\"path\", {\n  d: \"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z\"\n}));\nconst useLayoutEffect = hasWindow() ? React.useLayoutEffect : React.useEffect;\n\nfunction useMotionPreference() {\n  const [reduceMotion, setReduceMotion] = React.useState(false);\n  React.useEffect(() => {\n    var _a, _b;\n\n    const mediaQuery = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, \"(prefers-reduced-motion: reduce)\");\n    setReduceMotion(mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.matches);\n\n    const listener = event => setReduceMotion(event.matches);\n\n    (_b = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.addEventListener) === null || _b === void 0 ? void 0 : _b.call(mediaQuery, \"change\", listener);\n    return () => {\n      var _a;\n\n      return (_a = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(mediaQuery, \"change\", listener);\n    };\n  }, []);\n  return reduceMotion;\n}\n\nfunction currentTransformation(node) {\n  let x = 0;\n  let y = 0;\n  let z = 0;\n  const matrix = window.getComputedStyle(node).transform;\n  const matcher = matrix.match(/matrix.*\\((.+)\\)/);\n\n  if (matcher) {\n    const values = matcher[1].split(\",\").map(parseInt);\n\n    if (values.length === 6) {\n      x = values[4];\n      y = values[5];\n    } else if (values.length === 16) {\n      x = values[12];\n      y = values[13];\n      z = values[14];\n    }\n  }\n\n  return {\n    x,\n    y,\n    z\n  };\n}\n\nfunction useAnimation(nodeRef, computeAnimation) {\n  const snapshot = React.useRef();\n  const animation = React.useRef();\n  const reduceMotion = useMotionPreference();\n  useLayoutEffect(() => {\n    var _a, _b, _c;\n\n    if (nodeRef.current && snapshot.current !== undefined && !reduceMotion) {\n      const {\n        keyframes,\n        duration,\n        easing,\n        onfinish\n      } = computeAnimation(snapshot.current, nodeRef.current.getBoundingClientRect(), currentTransformation(nodeRef.current)) || {};\n\n      if (keyframes && duration) {\n        (_a = animation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        animation.current = undefined;\n\n        try {\n          animation.current = (_c = (_b = nodeRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, keyframes, {\n            duration,\n            easing\n          });\n        } catch (err) {\n          console.error(err);\n        }\n\n        if (animation.current) {\n          animation.current.onfinish = () => {\n            animation.current = undefined;\n            onfinish === null || onfinish === void 0 ? void 0 : onfinish();\n          };\n        }\n      }\n    }\n\n    snapshot.current = undefined;\n  });\n  return {\n    prepareAnimation: currentSnapshot => {\n      snapshot.current = currentSnapshot;\n    },\n    isAnimationPlaying: () => {\n      var _a;\n\n      return ((_a = animation.current) === null || _a === void 0 ? void 0 : _a.playState) === \"running\";\n    }\n  };\n}\n\nfunction useContainerRect() {\n  const containerRef = React.useRef(null);\n  const observerRef = React.useRef();\n  const [containerRect, setContainerRect] = React.useState();\n  const setContainerRef = React.useCallback(node => {\n    containerRef.current = node;\n\n    if (observerRef.current) {\n      observerRef.current.disconnect();\n      observerRef.current = undefined;\n    }\n\n    const updateContainerRect = () => {\n      if (node) {\n        const styles = window.getComputedStyle(node);\n\n        const parse = value => parseFloat(value) || 0;\n\n        setContainerRect({\n          width: Math.round(node.clientWidth - parse(styles.paddingLeft) - parse(styles.paddingRight)),\n          height: Math.round(node.clientHeight - parse(styles.paddingTop) - parse(styles.paddingBottom))\n        });\n      } else {\n        setContainerRect(undefined);\n      }\n    };\n\n    updateContainerRect();\n\n    if (node && typeof ResizeObserver !== \"undefined\") {\n      observerRef.current = new ResizeObserver(updateContainerRect);\n      observerRef.current.observe(node);\n    }\n  }, []);\n  return {\n    setContainerRef,\n    containerRef,\n    containerRect\n  };\n}\n\nfunction useDelay() {\n  const timeoutId = React.useRef();\n  const {\n    setTimeout,\n    clearTimeout\n  } = useTimeouts();\n  return React.useCallback((callback, delay) => {\n    clearTimeout(timeoutId.current);\n    timeoutId.current = setTimeout(callback, delay > 0 ? delay : 0);\n  }, [setTimeout, clearTimeout]);\n}\n\nfunction useEventCallback(fn) {\n  const ref = React.useRef(fn);\n  useLayoutEffect(() => {\n    ref.current = fn;\n  });\n  return React.useCallback(function () {\n    var _a;\n\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return (_a = ref.current) === null || _a === void 0 ? void 0 : _a.call(ref, ...args);\n  }, []);\n}\n\nfunction setRef(ref, value) {\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\n\nfunction useForkRef(refA, refB) {\n  return React.useMemo(() => refA == null && refB == null ? null : refValue => {\n    setRef(refA, refValue);\n    setRef(refB, refValue);\n  }, [refA, refB]);\n}\n\nfunction useLoseFocus(focus) {\n  let disabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  const focused = React.useRef();\n  useLayoutEffect(() => {\n    if (disabled && focused.current) {\n      focused.current = false;\n      focus();\n    }\n  }, [disabled, focus]);\n  const onFocus = React.useCallback(() => {\n    focused.current = true;\n  }, []);\n  const onBlur = React.useCallback(() => {\n    focused.current = false;\n  }, []);\n  return {\n    onFocus,\n    onBlur\n  };\n}\n\nfunction useRTL() {\n  const [isRTL, setIsRTL] = React.useState(false);\n  useLayoutEffect(() => {\n    setIsRTL(window.getComputedStyle(window.document.documentElement).direction === \"rtl\");\n  }, []);\n  return isRTL;\n}\n\nfunction useSensors() {\n  const [subscribers] = React.useState({});\n  const notifySubscribers = React.useCallback((type, event) => {\n    var _a;\n\n    (_a = subscribers[type]) === null || _a === void 0 ? void 0 : _a.forEach(listener => {\n      if (!event.isPropagationStopped()) listener(event);\n    });\n  }, [subscribers]);\n  const registerSensors = React.useMemo(() => ({\n    onPointerDown: event => notifySubscribers(EVENT_ON_POINTER_DOWN, event),\n    onPointerMove: event => notifySubscribers(EVENT_ON_POINTER_MOVE, event),\n    onPointerUp: event => notifySubscribers(EVENT_ON_POINTER_UP, event),\n    onPointerLeave: event => notifySubscribers(EVENT_ON_POINTER_LEAVE, event),\n    onPointerCancel: event => notifySubscribers(EVENT_ON_POINTER_CANCEL, event),\n    onKeyDown: event => notifySubscribers(EVENT_ON_KEY_DOWN, event),\n    onKeyUp: event => notifySubscribers(EVENT_ON_KEY_UP, event),\n    onWheel: event => notifySubscribers(EVENT_ON_WHEEL, event)\n  }), [notifySubscribers]);\n  const subscribeSensors = React.useCallback((type, callback) => {\n    if (!subscribers[type]) {\n      subscribers[type] = [];\n    }\n\n    subscribers[type].unshift(callback);\n    return () => {\n      const listeners = subscribers[type];\n\n      if (listeners) {\n        listeners.splice(0, listeners.length, ...listeners.filter(el => el !== callback));\n      }\n    };\n  }, [subscribers]);\n  return {\n    registerSensors,\n    subscribeSensors\n  };\n}\n\nfunction useThrottle(callback, delay) {\n  const lastCallbackTime = React.useRef(0);\n  const delayCallback = useDelay();\n  const executeCallback = useEventCallback(function () {\n    lastCallbackTime.current = Date.now();\n\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    callback(args);\n  });\n  return React.useCallback(function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    delayCallback(() => {\n      executeCallback(args);\n    }, delay - (Date.now() - lastCallbackTime.current));\n  }, [delay, executeCallback, delayCallback]);\n}\n\nconst slidePrefix = makeComposePrefix(\"slide\");\nconst slideImagePrefix = makeComposePrefix(\"slide_image\");\n\nfunction ImageSlide(_ref7) {\n  let {\n    slide: image,\n    offset,\n    render,\n    rect,\n    imageFit,\n    imageProps,\n    onClick,\n    onLoad,\n    style\n  } = _ref7;\n\n  var _a, _b, _c, _d, _e, _f, _g;\n\n  const [status, setStatus] = React.useState(SLIDE_STATUS_LOADING);\n  const {\n    publish\n  } = useEvents();\n  const {\n    setTimeout\n  } = useTimeouts();\n  const imageRef = React.useRef(null);\n  React.useEffect(() => {\n    if (offset === 0) {\n      publish(activeSlideStatus(status));\n    }\n  }, [offset, status, publish]);\n  const handleLoading = useEventCallback(img => {\n    (\"decode\" in img ? img.decode() : Promise.resolve()).catch(() => {}).then(() => {\n      if (!img.parentNode) {\n        return;\n      }\n\n      setStatus(SLIDE_STATUS_COMPLETE);\n      setTimeout(() => {\n        onLoad === null || onLoad === void 0 ? void 0 : onLoad(img);\n      }, 0);\n    });\n  });\n  const setImageRef = React.useCallback(img => {\n    imageRef.current = img;\n\n    if (img === null || img === void 0 ? void 0 : img.complete) {\n      handleLoading(img);\n    }\n  }, [handleLoading]);\n  const handleOnLoad = React.useCallback(event => {\n    handleLoading(event.currentTarget);\n  }, [handleLoading]);\n  const onError = React.useCallback(() => {\n    setStatus(SLIDE_STATUS_ERROR);\n  }, []);\n  const cover = isImageFitCover(image, imageFit);\n\n  const nonInfinite = (value, fallback) => Number.isFinite(value) ? value : fallback;\n\n  const maxWidth = nonInfinite(Math.max(...((_b = (_a = image.srcSet) === null || _a === void 0 ? void 0 : _a.map(x => x.width)) !== null && _b !== void 0 ? _b : []).concat(image.width ? [image.width] : []).filter(Boolean)), ((_c = imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalWidth) || 0);\n  const maxHeight = nonInfinite(Math.max(...((_e = (_d = image.srcSet) === null || _d === void 0 ? void 0 : _d.map(x => x.height)) !== null && _e !== void 0 ? _e : []).concat(image.height ? [image.height] : []).filter(Boolean)), ((_f = imageRef.current) === null || _f === void 0 ? void 0 : _f.naturalHeight) || 0);\n  const defaultStyle = maxWidth && maxHeight ? {\n    maxWidth: `min(${maxWidth}px, 100%)`,\n    maxHeight: `min(${maxHeight}px, 100%)`\n  } : {\n    maxWidth: \"100%\",\n    maxHeight: \"100%\"\n  };\n  const srcSet = (_g = image.srcSet) === null || _g === void 0 ? void 0 : _g.sort((a, b) => a.width - b.width).map(item => `${item.src} ${item.width}w`).join(\", \");\n\n  const estimateActualWidth = () => rect && !cover && image.width && image.height ? rect.height / image.height * image.width : Number.MAX_VALUE;\n\n  const sizes = srcSet && rect && hasWindow() ? `${Math.round(Math.min(estimateActualWidth(), rect.width))}px` : undefined;\n  const {\n    style: imagePropsStyle,\n    className: imagePropsClassName,\n    ...restImageProps\n  } = imageProps || {};\n  return React.createElement(React.Fragment, null, React.createElement(\"img\", {\n    ref: setImageRef,\n    onLoad: handleOnLoad,\n    onError: onError,\n    onClick: onClick,\n    draggable: false,\n    className: clsx(cssClass(slideImagePrefix()), cover && cssClass(slideImagePrefix(\"cover\")), status !== SLIDE_STATUS_COMPLETE && cssClass(slideImagePrefix(\"loading\")), imagePropsClassName),\n    style: { ...defaultStyle,\n      ...style,\n      ...imagePropsStyle\n    },\n    ...restImageProps,\n    alt: image.alt,\n    sizes: sizes,\n    srcSet: srcSet,\n    src: image.src\n  }), status !== SLIDE_STATUS_COMPLETE && React.createElement(\"div\", {\n    className: cssClass(slidePrefix(SLIDE_STATUS_PLACEHOLDER))\n  }, status === SLIDE_STATUS_LOADING && ((render === null || render === void 0 ? void 0 : render.iconLoading) ? render.iconLoading() : React.createElement(LoadingIcon, {\n    className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_LOADING)))\n  })), status === SLIDE_STATUS_ERROR && ((render === null || render === void 0 ? void 0 : render.iconError) ? render.iconError() : React.createElement(ErrorIcon, {\n    className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_ERROR)))\n  }))));\n}\n\nvar SwipeState;\n\n(function (SwipeState) {\n  SwipeState[SwipeState[\"NONE\"] = 0] = \"NONE\";\n  SwipeState[SwipeState[\"SWIPE\"] = 1] = \"SWIPE\";\n  SwipeState[SwipeState[\"PULL\"] = 2] = \"PULL\";\n  SwipeState[SwipeState[\"ANIMATION\"] = 3] = \"ANIMATION\";\n})(SwipeState || (SwipeState = {}));\n\nfunction usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled) {\n  React.useEffect(() => !disabled ? cleanup(subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp)) : () => {}, [subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled]);\n}\n\nvar Gesture;\n\n(function (Gesture) {\n  Gesture[Gesture[\"NONE\"] = 0] = \"NONE\";\n  Gesture[Gesture[\"SWIPE\"] = 1] = \"SWIPE\";\n  Gesture[Gesture[\"PULL\"] = 2] = \"PULL\";\n})(Gesture || (Gesture = {}));\n\nconst SWIPE_THRESHOLD = 30;\n\nfunction usePointerSwipe(subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel, pullUpEnabled, pullDownEnabled, onPullStart, onPullProgress, onPullFinish, onPullCancel) {\n  const offset = React.useRef(0);\n  const pointers = React.useRef([]);\n  const activePointer = React.useRef();\n  const startTime = React.useRef(0);\n  const gesture = React.useRef(Gesture.NONE);\n  const clearPointer = React.useCallback(event => {\n    if (activePointer.current === event.pointerId) {\n      activePointer.current = undefined;\n      gesture.current = Gesture.NONE;\n    }\n\n    const currentPointers = pointers.current;\n    currentPointers.splice(0, currentPointers.length, ...currentPointers.filter(p => p.pointerId !== event.pointerId));\n  }, []);\n  const addPointer = React.useCallback(event => {\n    clearPointer(event);\n    event.persist();\n    pointers.current.push(event);\n  }, [clearPointer]);\n  const onPointerDown = useEventCallback(event => {\n    addPointer(event);\n  });\n\n  const exceedsPullThreshold = (value, threshold) => pullDownEnabled && value > threshold || pullUpEnabled && value < -threshold;\n\n  const onPointerUp = useEventCallback(event => {\n    if (pointers.current.find(x => x.pointerId === event.pointerId) && activePointer.current === event.pointerId) {\n      const duration = Date.now() - startTime.current;\n      const currentOffset = offset.current;\n\n      if (gesture.current === Gesture.SWIPE) {\n        if (Math.abs(currentOffset) > 0.3 * containerWidth || Math.abs(currentOffset) > 5 && duration < swipeAnimationDuration) {\n          onSwipeFinish(currentOffset, duration);\n        } else {\n          onSwipeCancel(currentOffset);\n        }\n      } else if (gesture.current === Gesture.PULL) {\n        if (exceedsPullThreshold(currentOffset, 2 * SWIPE_THRESHOLD)) {\n          onPullFinish(currentOffset, duration);\n        } else {\n          onPullCancel(currentOffset);\n        }\n      }\n\n      offset.current = 0;\n      gesture.current = Gesture.NONE;\n    }\n\n    clearPointer(event);\n  });\n  const onPointerMove = useEventCallback(event => {\n    const pointer = pointers.current.find(p => p.pointerId === event.pointerId);\n\n    if (pointer) {\n      const isCurrentPointer = activePointer.current === event.pointerId;\n\n      if (event.buttons === 0) {\n        if (isCurrentPointer && offset.current !== 0) {\n          onPointerUp(event);\n        } else {\n          clearPointer(pointer);\n        }\n\n        return;\n      }\n\n      const deltaX = event.clientX - pointer.clientX;\n      const deltaY = event.clientY - pointer.clientY;\n\n      if (activePointer.current === undefined) {\n        const startGesture = newGesture => {\n          addPointer(event);\n          activePointer.current = event.pointerId;\n          startTime.current = Date.now();\n          gesture.current = newGesture;\n        };\n\n        if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > SWIPE_THRESHOLD && isSwipeValid(deltaX)) {\n          startGesture(Gesture.SWIPE);\n          onSwipeStart();\n        } else if (Math.abs(deltaY) > Math.abs(deltaX) && exceedsPullThreshold(deltaY, SWIPE_THRESHOLD)) {\n          startGesture(Gesture.PULL);\n          onPullStart();\n        }\n      } else if (isCurrentPointer) {\n        if (gesture.current === Gesture.SWIPE) {\n          offset.current = deltaX;\n          onSwipeProgress(deltaX);\n        } else if (gesture.current === Gesture.PULL) {\n          offset.current = deltaY;\n          onPullProgress(deltaY);\n        }\n      }\n    }\n  });\n  usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp);\n}\n\nconst WHEEL = \"wheel\";\n\nfunction preventDefault(event) {\n  if (Math.abs(event.deltaX) > Math.abs(event.deltaY) || event.ctrlKey) {\n    event.preventDefault();\n  }\n}\n\nfunction usePreventSwipeNavigation() {\n  const ref = React.useRef(null);\n  return React.useCallback(node => {\n    var _a;\n\n    if (node) {\n      node.addEventListener(WHEEL, preventDefault, {\n        passive: false\n      });\n    } else {\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(WHEEL, preventDefault);\n    }\n\n    ref.current = node;\n  }, []);\n}\n\nfunction useWheelSwipe(swipeState, subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel) {\n  const offset = React.useRef(0);\n  const intent = React.useRef(0);\n  const intentCleanup = React.useRef();\n  const resetCleanup = React.useRef();\n  const wheelResidualMomentum = React.useRef(0);\n  const startTime = React.useRef(0);\n  const {\n    setTimeout,\n    clearTimeout\n  } = useTimeouts();\n  const cancelSwipeIntentCleanup = React.useCallback(() => {\n    if (intentCleanup.current) {\n      clearTimeout(intentCleanup.current);\n      intentCleanup.current = undefined;\n    }\n  }, [clearTimeout]);\n  const cancelSwipeResetCleanup = React.useCallback(() => {\n    if (resetCleanup.current) {\n      clearTimeout(resetCleanup.current);\n      resetCleanup.current = undefined;\n    }\n  }, [clearTimeout]);\n  const handleCleanup = useEventCallback(() => {\n    if (swipeState !== SwipeState.SWIPE) {\n      offset.current = 0;\n      startTime.current = 0;\n      cancelSwipeIntentCleanup();\n      cancelSwipeResetCleanup();\n    }\n  });\n  React.useEffect(handleCleanup, [swipeState, handleCleanup]);\n  const handleCancelSwipe = useEventCallback(currentSwipeOffset => {\n    resetCleanup.current = undefined;\n\n    if (offset.current === currentSwipeOffset) {\n      onSwipeCancel(offset.current);\n    }\n  });\n  const onWheel = useEventCallback(event => {\n    if (event.ctrlKey) {\n      return;\n    }\n\n    if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n      return;\n    }\n\n    if (swipeState === SwipeState.NONE) {\n      if (Math.abs(event.deltaX) <= 1.2 * Math.abs(wheelResidualMomentum.current)) {\n        wheelResidualMomentum.current = event.deltaX;\n        return;\n      }\n\n      if (!isSwipeValid(-event.deltaX)) {\n        return;\n      }\n\n      intent.current += event.deltaX;\n      cancelSwipeIntentCleanup();\n\n      if (Math.abs(intent.current) > 30) {\n        intent.current = 0;\n        wheelResidualMomentum.current = 0;\n        startTime.current = Date.now();\n        onSwipeStart();\n      } else {\n        const currentSwipeIntent = intent.current;\n        intentCleanup.current = setTimeout(() => {\n          intentCleanup.current = undefined;\n\n          if (currentSwipeIntent === intent.current) {\n            intent.current = 0;\n          }\n        }, swipeAnimationDuration);\n      }\n    } else if (swipeState === SwipeState.SWIPE) {\n      let newSwipeOffset = offset.current - event.deltaX;\n      newSwipeOffset = Math.min(Math.abs(newSwipeOffset), containerWidth) * Math.sign(newSwipeOffset);\n      offset.current = newSwipeOffset;\n      onSwipeProgress(newSwipeOffset);\n      cancelSwipeResetCleanup();\n\n      if (Math.abs(newSwipeOffset) > 0.2 * containerWidth) {\n        wheelResidualMomentum.current = event.deltaX;\n        onSwipeFinish(newSwipeOffset, Date.now() - startTime.current);\n        return;\n      }\n\n      resetCleanup.current = setTimeout(() => handleCancelSwipe(newSwipeOffset), 2 * swipeAnimationDuration);\n    } else {\n      wheelResidualMomentum.current = event.deltaX;\n    }\n  });\n  React.useEffect(() => subscribeSensors(EVENT_ON_WHEEL, onWheel), [subscribeSensors, onWheel]);\n}\n\nconst cssContainerPrefix = makeComposePrefix(\"container\");\nconst ControllerContext = React.createContext(null);\nconst useController = makeUseContext(\"useController\", \"ControllerContext\", ControllerContext);\n\nfunction Controller(_ref8) {\n  let {\n    children,\n    ...props\n  } = _ref8;\n\n  var _a;\n\n  const {\n    carousel,\n    animation,\n    controller,\n    on,\n    styles,\n    render\n  } = props;\n  const [toolbarWidth, setToolbarWidth] = React.useState();\n  const state = useLightboxState();\n  const dispatch = useLightboxDispatch();\n  const [swipeState, setSwipeState] = React.useState(SwipeState.NONE);\n  const swipeOffset = React.useRef(0);\n  const pullOffset = React.useRef(0);\n  const pullOpacity = React.useRef(1);\n  const {\n    registerSensors,\n    subscribeSensors\n  } = useSensors();\n  const {\n    subscribe,\n    publish\n  } = useEvents();\n  const cleanupAnimationIncrement = useDelay();\n  const cleanupSwipeOffset = useDelay();\n  const cleanupPullOffset = useDelay();\n  const {\n    containerRef,\n    setContainerRef,\n    containerRect\n  } = useContainerRect();\n  const handleContainerRef = useForkRef(usePreventSwipeNavigation(), setContainerRef);\n  const carouselRef = React.useRef(null);\n  const setCarouselRef = useForkRef(carouselRef, undefined);\n  const isRTL = useRTL();\n\n  const rtl = value => (isRTL ? -1 : 1) * (typeof value === \"number\" ? value : 1);\n\n  const focus = useEventCallback(() => {\n    var _a;\n\n    return (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n  });\n  const getLightboxProps = useEventCallback(() => props);\n  const getLightboxState = useEventCallback(() => state);\n  const prev = React.useCallback(params => publish(ACTION_PREV, params), [publish]);\n  const next = React.useCallback(params => publish(ACTION_NEXT, params), [publish]);\n  const close = React.useCallback(() => publish(ACTION_CLOSE), [publish]);\n\n  const isSwipeValid = offset => !(carousel.finite && (rtl(offset) > 0 && state.currentIndex === 0 || rtl(offset) < 0 && state.currentIndex === state.slides.length - 1));\n\n  const setSwipeOffset = offset => {\n    var _a;\n\n    swipeOffset.current = offset;\n    (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"swipe_offset\"), `${Math.round(offset)}px`);\n  };\n\n  const {\n    closeOnPullUp,\n    closeOnPullDown\n  } = controller;\n\n  const setPullOffset = offset => {\n    var _a, _b;\n\n    pullOffset.current = offset;\n\n    pullOpacity.current = (() => {\n      const threshold = 60;\n      const minOpacity = 0.5;\n\n      const offsetValue = (() => {\n        if (closeOnPullDown && offset > 0) return offset;\n        if (closeOnPullUp && offset < 0) return -offset;\n        return 0;\n      })();\n\n      return Math.min(Math.max(round(1 - offsetValue / threshold * (1 - minOpacity), 2), minOpacity), 1);\n    })();\n\n    (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"pull_offset\"), `${Math.round(offset)}px`);\n    (_b = containerRef.current) === null || _b === void 0 ? void 0 : _b.style.setProperty(cssVar(\"pull_opacity\"), `${pullOpacity.current}`);\n  };\n\n  const {\n    prepareAnimation: preparePullAnimation\n  } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n    if (carouselRef.current && containerRect) {\n      return {\n        keyframes: [{\n          transform: `translate(0, ${snapshot.rect.y - rect.y + translate.y}px)`,\n          opacity: snapshot.opacity\n        }, {\n          transform: \"translate(0, 0)\",\n          opacity: 1\n        }],\n        duration: snapshot.duration,\n        easing: animation.easing.fade\n      };\n    }\n\n    return undefined;\n  });\n\n  const pull = (offset, cancel) => {\n    if (closeOnPullUp || closeOnPullDown) {\n      setPullOffset(offset);\n      let duration = 0;\n\n      if (carouselRef.current) {\n        duration = animation.fade * (cancel ? 2 : 1);\n        preparePullAnimation({\n          rect: carouselRef.current.getBoundingClientRect(),\n          opacity: pullOpacity.current,\n          duration\n        });\n      }\n\n      cleanupPullOffset(() => {\n        setPullOffset(0);\n        setSwipeState(SwipeState.NONE);\n      }, duration);\n      setSwipeState(SwipeState.ANIMATION);\n\n      if (!cancel) {\n        close();\n      }\n    }\n  };\n\n  const {\n    prepareAnimation,\n    isAnimationPlaying\n  } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n    var _a;\n\n    if (carouselRef.current && containerRect && ((_a = state.animation) === null || _a === void 0 ? void 0 : _a.duration)) {\n      const parsedSpacing = parseLengthPercentage(carousel.spacing);\n      const spacingValue = (parsedSpacing.percent ? parsedSpacing.percent * containerRect.width / 100 : parsedSpacing.pixel) || 0;\n      return {\n        keyframes: [{\n          transform: `translate(${rtl(state.globalIndex - snapshot.index) * (containerRect.width + spacingValue) + snapshot.rect.x - rect.x + translate.x}px, 0)`\n        }, {\n          transform: \"translate(0, 0)\"\n        }],\n        duration: state.animation.duration,\n        easing: state.animation.easing\n      };\n    }\n\n    return undefined;\n  });\n  const swipe = useEventCallback(action => {\n    var _a, _b;\n\n    const currentSwipeOffset = action.offset || 0;\n    const swipeDuration = !currentSwipeOffset ? (_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe : animation.swipe;\n    const swipeEasing = !currentSwipeOffset && !isAnimationPlaying() ? animation.easing.navigation : animation.easing.swipe;\n    let {\n      direction\n    } = action;\n    const count = (_b = action.count) !== null && _b !== void 0 ? _b : 1;\n    let newSwipeState = SwipeState.ANIMATION;\n    let newSwipeAnimationDuration = swipeDuration * count;\n\n    if (!direction) {\n      const containerWidth = containerRect === null || containerRect === void 0 ? void 0 : containerRect.width;\n      const elapsedTime = action.duration || 0;\n      const expectedTime = containerWidth ? swipeDuration / containerWidth * Math.abs(currentSwipeOffset) : swipeDuration;\n\n      if (count !== 0) {\n        if (elapsedTime < expectedTime) {\n          newSwipeAnimationDuration = newSwipeAnimationDuration / expectedTime * Math.max(elapsedTime, expectedTime / 5);\n        } else if (containerWidth) {\n          newSwipeAnimationDuration = swipeDuration / containerWidth * (containerWidth - Math.abs(currentSwipeOffset));\n        }\n\n        direction = rtl(currentSwipeOffset) > 0 ? ACTION_PREV : ACTION_NEXT;\n      } else {\n        newSwipeAnimationDuration = swipeDuration / 2;\n      }\n    }\n\n    let increment = 0;\n\n    if (direction === ACTION_PREV) {\n      if (isSwipeValid(rtl(1))) {\n        increment = -count;\n      } else {\n        newSwipeState = SwipeState.NONE;\n        newSwipeAnimationDuration = swipeDuration;\n      }\n    } else if (direction === ACTION_NEXT) {\n      if (isSwipeValid(rtl(-1))) {\n        increment = count;\n      } else {\n        newSwipeState = SwipeState.NONE;\n        newSwipeAnimationDuration = swipeDuration;\n      }\n    }\n\n    newSwipeAnimationDuration = Math.round(newSwipeAnimationDuration);\n    cleanupSwipeOffset(() => {\n      setSwipeOffset(0);\n      setSwipeState(SwipeState.NONE);\n    }, newSwipeAnimationDuration);\n\n    if (carouselRef.current) {\n      prepareAnimation({\n        rect: carouselRef.current.getBoundingClientRect(),\n        index: state.globalIndex\n      });\n    }\n\n    setSwipeState(newSwipeState);\n    publish(ACTION_SWIPE, {\n      type: \"swipe\",\n      increment,\n      duration: newSwipeAnimationDuration,\n      easing: swipeEasing\n    });\n  });\n  React.useEffect(() => {\n    var _a, _b;\n\n    if (((_a = state.animation) === null || _a === void 0 ? void 0 : _a.increment) && ((_b = state.animation) === null || _b === void 0 ? void 0 : _b.duration)) {\n      cleanupAnimationIncrement(() => dispatch({\n        type: \"swipe\",\n        increment: 0\n      }), state.animation.duration);\n    }\n  }, [state.animation, dispatch, cleanupAnimationIncrement]);\n  const swipeParams = [subscribeSensors, isSwipeValid, (containerRect === null || containerRect === void 0 ? void 0 : containerRect.width) || 0, animation.swipe, () => setSwipeState(SwipeState.SWIPE), offset => setSwipeOffset(offset), (offset, duration) => swipe({\n    offset,\n    duration,\n    count: 1\n  }), offset => swipe({\n    offset,\n    count: 0\n  })];\n  const pullParams = [() => {\n    if (closeOnPullDown) {\n      setSwipeState(SwipeState.PULL);\n    }\n  }, offset => setPullOffset(offset), offset => pull(offset), offset => pull(offset, true)];\n  usePointerSwipe(...swipeParams, closeOnPullUp, closeOnPullDown, ...pullParams);\n  useWheelSwipe(swipeState, ...swipeParams);\n  const focusOnMount = useEventCallback(() => {\n    if (controller.focus) {\n      if (document.querySelector(`.${cssClass(MODULE_PORTAL)} .${cssClass(cssContainerPrefix())}`)) {\n        focus();\n      }\n    }\n  });\n  React.useEffect(focusOnMount, [focusOnMount]);\n  const onViewCallback = useEventCallback(() => {\n    var _a;\n\n    (_a = on.view) === null || _a === void 0 ? void 0 : _a.call(on, {\n      index: state.currentIndex\n    });\n  });\n  React.useEffect(onViewCallback, [state.globalIndex, onViewCallback]);\n  React.useEffect(() => cleanup(subscribe(ACTION_PREV, action => swipe({\n    direction: ACTION_PREV,\n    ...action\n  })), subscribe(ACTION_NEXT, action => swipe({\n    direction: ACTION_NEXT,\n    ...action\n  })), subscribe(ACTION_SWIPE, action => dispatch(action))), [subscribe, swipe, dispatch]);\n  const context = React.useMemo(() => ({\n    prev,\n    next,\n    close,\n    focus,\n    slideRect: containerRect ? computeSlideRect(containerRect, carousel.padding) : {\n      width: 0,\n      height: 0\n    },\n    containerRect: containerRect || {\n      width: 0,\n      height: 0\n    },\n    subscribeSensors,\n    containerRef,\n    setCarouselRef,\n    toolbarWidth,\n    setToolbarWidth\n  }), [prev, next, close, focus, subscribeSensors, containerRect, containerRef, setCarouselRef, toolbarWidth, setToolbarWidth, carousel.padding]);\n  React.useImperativeHandle(controller.ref, () => ({\n    prev,\n    next,\n    close,\n    focus,\n    getLightboxProps,\n    getLightboxState\n  }), [prev, next, close, focus, getLightboxProps, getLightboxState]);\n  return React.createElement(\"div\", {\n    ref: handleContainerRef,\n    className: clsx(cssClass(cssContainerPrefix()), cssClass(CLASS_FLEX_CENTER)),\n    style: { ...(swipeState === SwipeState.SWIPE ? {\n        [cssVar(\"swipe_offset\")]: `${Math.round(swipeOffset.current)}px`\n      } : null),\n      ...(swipeState === SwipeState.PULL ? {\n        [cssVar(\"pull_offset\")]: `${Math.round(pullOffset.current)}px`,\n        [cssVar(\"pull_opacity\")]: `${pullOpacity.current}`\n      } : null),\n      ...(controller.touchAction !== \"none\" ? {\n        [cssVar(\"controller_touch_action\")]: controller.touchAction\n      } : null),\n      ...styles.container\n    },\n    ...(controller.aria ? {\n      role: \"presentation\",\n      \"aria-live\": \"polite\"\n    } : null),\n    tabIndex: -1,\n    ...registerSensors\n  }, containerRect && React.createElement(ControllerContext.Provider, {\n    value: context\n  }, children, (_a = render.controls) === null || _a === void 0 ? void 0 : _a.call(render)));\n}\n\nconst ControllerModule = createModule(MODULE_CONTROLLER, Controller);\n\nfunction cssPrefix$2(value) {\n  return composePrefix(MODULE_CAROUSEL, value);\n}\n\nfunction cssSlidePrefix(value) {\n  return composePrefix(\"slide\", value);\n}\n\nfunction CarouselSlide(_ref9) {\n  let {\n    slide,\n    offset\n  } = _ref9;\n  const containerRef = React.useRef(null);\n  const {\n    currentIndex\n  } = useLightboxState();\n  const {\n    slideRect,\n    close\n  } = useController();\n  const {\n    render,\n    carousel: {\n      imageFit,\n      imageProps\n    },\n    on: {\n      click: onClick\n    },\n    controller: {\n      closeOnBackdropClick\n    },\n    styles: {\n      slide: style\n    }\n  } = useLightboxProps();\n\n  const renderSlide = () => {\n    var _a, _b, _c, _d;\n\n    let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, {\n      slide,\n      offset,\n      rect: slideRect\n    });\n\n    if (!rendered && isImageSlide(slide)) {\n      rendered = React.createElement(ImageSlide, {\n        slide: slide,\n        offset: offset,\n        render: render,\n        rect: slideRect,\n        imageFit: imageFit,\n        imageProps: imageProps,\n        onClick: offset === 0 ? () => onClick === null || onClick === void 0 ? void 0 : onClick({\n          index: currentIndex\n        }) : undefined\n      });\n    }\n\n    return rendered ? React.createElement(React.Fragment, null, (_b = render.slideHeader) === null || _b === void 0 ? void 0 : _b.call(render, {\n      slide\n    }), ((_c = render.slideContainer) !== null && _c !== void 0 ? _c : _ref10 => {\n      let {\n        children\n      } = _ref10;\n      return children;\n    })({\n      slide,\n      children: rendered\n    }), (_d = render.slideFooter) === null || _d === void 0 ? void 0 : _d.call(render, {\n      slide\n    })) : null;\n  };\n\n  const handleBackdropClick = event => {\n    const container = containerRef.current;\n    const target = event.target instanceof HTMLElement ? event.target : undefined;\n\n    if (closeOnBackdropClick && target && container && (target === container || Array.from(container.children).find(x => x === target) && target.classList.contains(cssClass(CLASS_SLIDE_WRAPPER)))) {\n      close();\n    }\n  };\n\n  return React.createElement(\"div\", {\n    ref: containerRef,\n    className: clsx(cssClass(cssSlidePrefix()), offset === 0 && cssClass(cssSlidePrefix(\"current\")), cssClass(CLASS_FLEX_CENTER)),\n    onClick: handleBackdropClick,\n    style: style\n  }, renderSlide());\n}\n\nfunction Placeholder() {\n  const style = useLightboxProps().styles.slide;\n  return React.createElement(\"div\", {\n    className: cssClass(\"slide\"),\n    style: style\n  });\n}\n\nfunction Carousel(_ref11) {\n  let {\n    carousel\n  } = _ref11;\n  const {\n    slides,\n    currentIndex,\n    globalIndex\n  } = useLightboxState();\n  const {\n    setCarouselRef\n  } = useController();\n  const spacingValue = parseLengthPercentage(carousel.spacing);\n  const paddingValue = parseLengthPercentage(carousel.padding);\n  const items = [];\n  const preload = calculatePreload(carousel, slides, 1);\n\n  if (hasSlides(slides)) {\n    for (let i = currentIndex - preload; i < currentIndex; i += 1) {\n      const key = globalIndex + i - currentIndex;\n      items.push(!carousel.finite || i >= 0 ? React.createElement(CarouselSlide, {\n        key: key,\n        slide: slides[(i + preload * slides.length) % slides.length],\n        offset: i - currentIndex\n      }) : React.createElement(Placeholder, {\n        key: key\n      }));\n    }\n\n    items.push(React.createElement(CarouselSlide, {\n      key: globalIndex,\n      slide: slides[currentIndex],\n      offset: 0\n    }));\n\n    for (let i = currentIndex + 1; i <= currentIndex + preload; i += 1) {\n      const key = globalIndex + i - currentIndex;\n      items.push(!carousel.finite || i <= slides.length - 1 ? React.createElement(CarouselSlide, {\n        key: key,\n        slide: slides[i % slides.length],\n        offset: i - currentIndex\n      }) : React.createElement(Placeholder, {\n        key: key\n      }));\n    }\n  }\n\n  return React.createElement(\"div\", {\n    ref: setCarouselRef,\n    className: clsx(cssClass(cssPrefix$2()), items.length > 0 && cssClass(cssPrefix$2(\"with_slides\"))),\n    style: {\n      [`${cssVar(cssPrefix$2(\"slides_count\"))}`]: items.length,\n      [`${cssVar(cssPrefix$2(\"spacing_px\"))}`]: spacingValue.pixel || 0,\n      [`${cssVar(cssPrefix$2(\"spacing_percent\"))}`]: spacingValue.percent || 0,\n      [`${cssVar(cssPrefix$2(\"padding_px\"))}`]: paddingValue.pixel || 0,\n      [`${cssVar(cssPrefix$2(\"padding_percent\"))}`]: paddingValue.percent || 0\n    }\n  }, items);\n}\n\nconst CarouselModule = createModule(MODULE_CAROUSEL, Carousel);\n\nfunction useNavigationState() {\n  const {\n    carousel\n  } = useLightboxProps();\n  const {\n    slides,\n    currentIndex\n  } = useLightboxState();\n  const prevDisabled = slides.length === 0 || carousel.finite && currentIndex === 0;\n  const nextDisabled = slides.length === 0 || carousel.finite && currentIndex === slides.length - 1;\n  return {\n    prevDisabled,\n    nextDisabled\n  };\n}\n\nfunction useKeyboardNavigation(subscribeSensors) {\n  var _a;\n\n  const isRTL = useRTL();\n  const {\n    publish\n  } = useEvents();\n  const {\n    animation\n  } = useLightboxProps();\n  const {\n    prevDisabled,\n    nextDisabled\n  } = useNavigationState();\n  const throttle = ((_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe) / 2;\n  const prev = useThrottle(() => publish(ACTION_PREV), throttle);\n  const next = useThrottle(() => publish(ACTION_NEXT), throttle);\n  const handleKeyDown = useEventCallback(event => {\n    switch (event.key) {\n      case VK_ESCAPE:\n        publish(ACTION_CLOSE);\n        break;\n\n      case VK_ARROW_LEFT:\n        if (!(isRTL ? nextDisabled : prevDisabled)) (isRTL ? next : prev)();\n        break;\n\n      case VK_ARROW_RIGHT:\n        if (!(isRTL ? prevDisabled : nextDisabled)) (isRTL ? prev : next)();\n        break;\n\n      default:\n    }\n  });\n  React.useEffect(() => subscribeSensors(EVENT_ON_KEY_DOWN, handleKeyDown), [subscribeSensors, handleKeyDown]);\n}\n\nfunction NavigationButton(_ref12) {\n  let {\n    label,\n    icon,\n    renderIcon,\n    action,\n    onClick,\n    disabled,\n    style\n  } = _ref12;\n  return React.createElement(IconButton, {\n    label: label,\n    icon: icon,\n    renderIcon: renderIcon,\n    className: cssClass(`navigation_${action}`),\n    disabled: disabled,\n    onClick: onClick,\n    style: style,\n    ...useLoseFocus(useController().focus, disabled)\n  });\n}\n\nfunction Navigation(_ref13) {\n  let {\n    render: {\n      buttonPrev,\n      buttonNext,\n      iconPrev,\n      iconNext\n    },\n    styles\n  } = _ref13;\n  const {\n    prev,\n    next,\n    subscribeSensors\n  } = useController();\n  const {\n    prevDisabled,\n    nextDisabled\n  } = useNavigationState();\n  useKeyboardNavigation(subscribeSensors);\n  return React.createElement(React.Fragment, null, buttonPrev ? buttonPrev() : React.createElement(NavigationButton, {\n    label: \"Previous\",\n    action: ACTION_PREV,\n    icon: PreviousIcon,\n    renderIcon: iconPrev,\n    style: styles.navigationPrev,\n    disabled: prevDisabled,\n    onClick: prev\n  }), buttonNext ? buttonNext() : React.createElement(NavigationButton, {\n    label: \"Next\",\n    action: ACTION_NEXT,\n    icon: NextIcon,\n    renderIcon: iconNext,\n    style: styles.navigationNext,\n    disabled: nextDisabled,\n    onClick: next\n  }));\n}\n\nconst NavigationModule = createModule(MODULE_NAVIGATION, Navigation);\nconst noScroll = cssClass(CLASS_NO_SCROLL);\nconst noScrollPadding = cssClass(CLASS_NO_SCROLL_PADDING);\n\nfunction isHTMLElement(element) {\n  return \"style\" in element;\n}\n\nfunction padScrollbar(element, padding, rtl) {\n  const styles = window.getComputedStyle(element);\n  const property = rtl ? \"padding-left\" : \"padding-right\";\n  const computedValue = rtl ? styles.paddingLeft : styles.paddingRight;\n  const originalValue = element.style.getPropertyValue(property);\n  element.style.setProperty(property, `${(parseInt(computedValue) || 0) + padding}px`);\n  return () => {\n    if (originalValue) {\n      element.style.setProperty(property, originalValue);\n    } else {\n      element.style.removeProperty(property);\n    }\n  };\n}\n\nfunction NoScroll(_ref14) {\n  let {\n    noScroll: {\n      disabled\n    },\n    children\n  } = _ref14;\n  const rtl = useRTL();\n  useLayoutEffect(() => {\n    if (disabled) return () => {};\n    const cleanup = [];\n    const {\n      body,\n      documentElement\n    } = document;\n    const scrollbar = Math.round(window.innerWidth - documentElement.clientWidth);\n\n    if (scrollbar > 0) {\n      cleanup.push(padScrollbar(body, scrollbar, rtl));\n      const elements = body.getElementsByTagName(\"*\");\n\n      for (let i = 0; i < elements.length; i += 1) {\n        const element = elements[i];\n\n        if (isHTMLElement(element) && window.getComputedStyle(element).getPropertyValue(\"position\") === \"fixed\" && !element.classList.contains(noScrollPadding)) {\n          cleanup.push(padScrollbar(element, scrollbar, rtl));\n        }\n      }\n    }\n\n    body.classList.add(noScroll);\n    return () => {\n      body.classList.remove(noScroll);\n      cleanup.forEach(clean => clean());\n    };\n  }, [rtl, disabled]);\n  return React.createElement(React.Fragment, null, children);\n}\n\nconst NoScrollModule = createModule(MODULE_NO_SCROLL, NoScroll);\n\nfunction cssPrefix$1(value) {\n  return composePrefix(MODULE_PORTAL, value);\n}\n\nfunction setAttribute(element, attribute, value) {\n  const previousValue = element.getAttribute(attribute);\n  element.setAttribute(attribute, value);\n  return () => {\n    if (previousValue) {\n      element.setAttribute(attribute, previousValue);\n    } else {\n      element.removeAttribute(attribute);\n    }\n  };\n}\n\nfunction Portal(_ref15) {\n  let {\n    children,\n    animation,\n    styles,\n    className,\n    on,\n    portal,\n    close\n  } = _ref15;\n  const [mounted, setMounted] = React.useState(false);\n  const [visible, setVisible] = React.useState(false);\n  const cleanup = React.useRef([]);\n  const restoreFocus = React.useRef(null);\n  const {\n    setTimeout\n  } = useTimeouts();\n  const {\n    subscribe\n  } = useEvents();\n  const reduceMotion = useMotionPreference();\n  const animationDuration = !reduceMotion ? animation.fade : 0;\n  React.useEffect(() => {\n    setMounted(true);\n    return () => {\n      setMounted(false);\n      setVisible(false);\n    };\n  }, []);\n  const handleCleanup = useEventCallback(() => {\n    cleanup.current.forEach(clean => clean());\n    cleanup.current = [];\n  });\n  const handleClose = useEventCallback(() => {\n    var _a;\n\n    setVisible(false);\n    handleCleanup();\n    (_a = on.exiting) === null || _a === void 0 ? void 0 : _a.call(on);\n    setTimeout(() => {\n      var _a;\n\n      (_a = on.exited) === null || _a === void 0 ? void 0 : _a.call(on);\n      close();\n    }, animationDuration);\n  });\n  React.useEffect(() => subscribe(ACTION_CLOSE, handleClose), [subscribe, handleClose]);\n  const handleEnter = useEventCallback(node => {\n    var _a, _b, _c;\n\n    node.scrollTop;\n    setVisible(true);\n    (_a = on.entering) === null || _a === void 0 ? void 0 : _a.call(on);\n    const elements = (_c = (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.children) !== null && _c !== void 0 ? _c : [];\n\n    for (let i = 0; i < elements.length; i += 1) {\n      const element = elements[i];\n\n      if ([\"TEMPLATE\", \"SCRIPT\", \"STYLE\"].indexOf(element.tagName) === -1 && element !== node) {\n        cleanup.current.push(setAttribute(element, \"inert\", \"true\"));\n        cleanup.current.push(setAttribute(element, \"aria-hidden\", \"true\"));\n      }\n    }\n\n    cleanup.current.push(() => {\n      var _a, _b;\n\n      (_b = (_a = restoreFocus.current) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n    setTimeout(() => {\n      var _a;\n\n      (_a = on.entered) === null || _a === void 0 ? void 0 : _a.call(on);\n    }, animationDuration);\n  });\n  const handleRef = React.useCallback(node => {\n    if (node) {\n      handleEnter(node);\n    } else {\n      handleCleanup();\n    }\n  }, [handleEnter, handleCleanup]);\n  return mounted ? createPortal(React.createElement(\"div\", {\n    ref: handleRef,\n    className: clsx(className, cssClass(\"root\"), cssClass(cssPrefix$1()), cssClass(CLASS_NO_SCROLL_PADDING), visible && cssClass(cssPrefix$1(\"open\"))),\n    role: \"presentation\",\n    \"aria-live\": \"polite\",\n    style: { ...(animation.fade !== LightboxDefaultProps.animation.fade ? {\n        [cssVar(\"fade_animation_duration\")]: `${animationDuration}ms`\n      } : null),\n      ...(animation.easing.fade !== LightboxDefaultProps.animation.easing.fade ? {\n        [cssVar(\"fade_animation_timing_function\")]: animation.easing.fade\n      } : null),\n      ...styles.root\n    },\n    onFocus: event => {\n      if (!restoreFocus.current) {\n        restoreFocus.current = event.relatedTarget;\n      }\n    }\n  }, children), portal.root || document.body) : null;\n}\n\nconst PortalModule = createModule(MODULE_PORTAL, Portal);\n\nfunction Root(_ref16) {\n  let {\n    children\n  } = _ref16;\n  return React.createElement(React.Fragment, null, children);\n}\n\nconst RootModule = createModule(MODULE_ROOT, Root);\n\nfunction cssPrefix(value) {\n  return composePrefix(MODULE_TOOLBAR, value);\n}\n\nfunction Toolbar(_ref17) {\n  let {\n    toolbar: {\n      buttons\n    },\n    render: {\n      buttonClose,\n      iconClose\n    },\n    styles\n  } = _ref17;\n  const {\n    close,\n    setToolbarWidth\n  } = useController();\n  const {\n    setContainerRef,\n    containerRect\n  } = useContainerRect();\n  useLayoutEffect(() => {\n    setToolbarWidth(containerRect === null || containerRect === void 0 ? void 0 : containerRect.width);\n  }, [setToolbarWidth, containerRect === null || containerRect === void 0 ? void 0 : containerRect.width]);\n\n  const renderCloseButton = () => {\n    if (buttonClose) return buttonClose();\n    return React.createElement(IconButton, {\n      key: ACTION_CLOSE,\n      label: \"Close\",\n      icon: CloseIcon,\n      renderIcon: iconClose,\n      onClick: close\n    });\n  };\n\n  return React.createElement(\"div\", {\n    ref: setContainerRef,\n    style: styles.toolbar,\n    className: cssClass(cssPrefix())\n  }, buttons === null || buttons === void 0 ? void 0 : buttons.map(button => button === ACTION_CLOSE ? renderCloseButton() : button));\n}\n\nconst ToolbarModule = createModule(MODULE_TOOLBAR, Toolbar);\n\nfunction renderNode(node, props) {\n  var _a;\n\n  return React.createElement(node.module.component, {\n    key: node.module.name,\n    ...props\n  }, (_a = node.children) === null || _a === void 0 ? void 0 : _a.map(child => renderNode(child, props)));\n}\n\nfunction mergeAnimation(defaultAnimation) {\n  let animation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    easing: defaultAnimationEasing,\n    ...restDefaultAnimation\n  } = defaultAnimation;\n  const {\n    easing,\n    ...restAnimation\n  } = animation;\n  return {\n    easing: { ...defaultAnimationEasing,\n      ...easing\n    },\n    ...restDefaultAnimation,\n    ...restAnimation\n  };\n}\n\nfunction Lightbox(_ref18) {\n  let {\n    carousel,\n    animation,\n    render,\n    toolbar,\n    controller,\n    noScroll,\n    on,\n    plugins,\n    slides,\n    index,\n    ...restProps\n  } = _ref18;\n  const {\n    animation: defaultAnimation,\n    carousel: defaultCarousel,\n    render: defaultRender,\n    toolbar: defaultToolbar,\n    controller: defaultController,\n    noScroll: defaultNoScroll,\n    on: defaultOn,\n    slides: defaultSlides,\n    index: defaultIndex,\n    plugins: defaultPlugins,\n    ...restDefaultProps\n  } = LightboxDefaultProps;\n  const {\n    config,\n    augmentation\n  } = withPlugins([createNode(PortalModule, [createNode(NoScrollModule, [createNode(ControllerModule, [createNode(CarouselModule), createNode(ToolbarModule), createNode(NavigationModule)])])])], plugins || defaultPlugins);\n  const props = augmentation({\n    animation: mergeAnimation(defaultAnimation, animation),\n    carousel: { ...defaultCarousel,\n      ...carousel\n    },\n    render: { ...defaultRender,\n      ...render\n    },\n    toolbar: { ...defaultToolbar,\n      ...toolbar\n    },\n    controller: { ...defaultController,\n      ...controller\n    },\n    noScroll: { ...defaultNoScroll,\n      ...noScroll\n    },\n    on: { ...defaultOn,\n      ...on\n    },\n    ...restDefaultProps,\n    ...restProps\n  });\n  if (!props.open) return null;\n  return React.createElement(LightboxPropsProvider, { ...props\n  }, React.createElement(LightboxStateProvider, {\n    slides: slides || defaultSlides,\n    index: parseInt(index || defaultIndex)\n  }, React.createElement(TimeoutsProvider, null, React.createElement(EventsProvider, null, renderNode(createNode(RootModule, config), props)))));\n}\n\nexport { ACTION_CLOSE, ACTION_NEXT, ACTION_PREV, ACTION_SWIPE, CLASS_FLEX_CENTER, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, CLASS_SLIDE_WRAPPER, Carousel, CarouselModule, CloseIcon, Controller, ControllerContext, ControllerModule, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ErrorIcon, EventsContext, EventsProvider, IMAGE_FIT_CONTAIN, IMAGE_FIT_COVER, IconButton, ImageSlide, Lightbox, LightboxDefaultProps, LightboxDispatchContext, LightboxPropsContext, LightboxPropsProvider, LightboxStateContext, LightboxStateProvider, LoadingIcon, MODULE_CAROUSEL, MODULE_CONTROLLER, MODULE_NAVIGATION, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR, Navigation, NavigationButton, NavigationModule, NextIcon, NoScroll, NoScrollModule, Portal, PortalModule, PreviousIcon, Root, RootModule, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_LOADING, SLIDE_STATUS_PLACEHOLDER, SwipeState, TimeoutsContext, TimeoutsProvider, Toolbar, ToolbarModule, UNKNOWN_ACTION_TYPE, VK_ARROW_LEFT, VK_ARROW_RIGHT, VK_ESCAPE, activeSlideStatus, addToolbarButton, calculatePreload, cleanup, clsx, composePrefix, computeSlideRect, createIcon, createIconDisabled, createModule, createNode, cssClass, cssVar, Lightbox as default, devicePixelRatio, getSlide, getSlideIfPresent, getSlideIndex, hasSlides, hasWindow, isImageFitCover, isImageSlide, label, makeComposePrefix, makeUseContext, parseInt, parseLengthPercentage, round, setRef, stopNavigationEventsPropagation, useAnimation, useContainerRect, useController, useDelay, useEventCallback, useEvents, useForkRef, useKeyboardNavigation, useLayoutEffect, useLightboxDispatch, useLightboxProps, useLightboxState, useLoseFocus, useMotionPreference, useNavigationState, usePointerEvents, usePointerSwipe, usePreventSwipeNavigation, useRTL, useSensors, useThrottle, useTimeouts, useWheelSwipe, withPlugins };","map":{"version":3,"sources":["/Users/praveenmanchi/Desktop/charan site/node_modules/yet-another-react-lightbox/dist/index.js"],"names":["React","IMAGE_FIT_COVER","IMAGE_FIT_CONTAIN","ACTION_CLOSE","MODULE_CONTROLLER","UNKNOWN_ACTION_TYPE","ELEMENT_BUTTON","ELEMENT_ICON","EVENT_ON_POINTER_DOWN","EVENT_ON_POINTER_MOVE","EVENT_ON_POINTER_UP","EVENT_ON_POINTER_LEAVE","EVENT_ON_POINTER_CANCEL","EVENT_ON_KEY_DOWN","EVENT_ON_KEY_UP","EVENT_ON_WHEEL","SLIDE_STATUS_LOADING","activeSlideStatus","SLIDE_STATUS_COMPLETE","SLIDE_STATUS_ERROR","SLIDE_STATUS_PLACEHOLDER","ACTION_PREV","ACTION_NEXT","ACTION_SWIPE","MODULE_PORTAL","CLASS_FLEX_CENTER","MODULE_CAROUSEL","CLASS_SLIDE_WRAPPER","VK_ARROW_RIGHT","VK_ARROW_LEFT","VK_ESCAPE","MODULE_NAVIGATION","CLASS_NO_SCROLL","CLASS_NO_SCROLL_PADDING","MODULE_NO_SCROLL","MODULE_ROOT","MODULE_TOOLBAR","createPortal","ACTIVE_SLIDE_COMPLETE","ACTIVE_SLIDE_ERROR","ACTIVE_SLIDE_LOADING","ACTIVE_SLIDE_PLAYING","CLASS_FULLSIZE","PLUGIN_CAPTIONS","PLUGIN_COUNTER","PLUGIN_DOWNLOAD","PLUGIN_FULLSCREEN","PLUGIN_INLINE","PLUGIN_SHARE","PLUGIN_SLIDESHOW","PLUGIN_THUMBNAILS","PLUGIN_ZOOM","SLIDE_STATUS_PLAYING","clsx","classes","filter","cls","Boolean","join","cssPrefix$3","cssClass","name","cssVar","composePrefix","base","prefix","makeComposePrefix","label","labels","lbl","cleanup","cleaners","forEach","cleaner","makeUseContext","contextName","context","ctx","useContext","Error","hasWindow","window","round","value","decimals","factor","Math","Number","EPSILON","isImageSlide","slide","type","undefined","isImageFitCover","image","imageFit","parseInt","parseLengthPercentage","input","pixel","endsWith","percent","computeSlideRect","containerRect","padding","paddingValue","paddingPixels","width","max","height","devicePixelRatio","getSlideIndex","index","slidesCount","hasSlides","slides","length","getSlide","getSlideIfPresent","addToolbarButton","toolbar","key","button","buttons","restToolbar","findIndex","item","buttonWithKey","isValidElement","cloneElement","result","splice","stopNavigationEventsPropagation","stopPropagation","event","onPointerDown","onKeyDown","onWheel","calculatePreload","carousel","minimum","min","preload","finite","floor","LightboxDefaultProps","open","close","render","plugins","animation","fade","swipe","easing","navigation","spacing","imageProps","controller","ref","focus","aria","touchAction","closeOnPullUp","closeOnPullDown","closeOnBackdropClick","portal","noScroll","disabled","on","styles","className","createModule","component","createNode","module","children","traverseNode","node","target","apply","flatMap","n","_a","traverse","nodes","withPlugins","root","augmentations","config","contains","pop","push","addParent","append","addChild","precede","addSibling","addModule","replace","remove","augment","augmentation","plugin","props","reduce","acc","EventsContext","createContext","useEvents","EventsProvider","subscriptions","useState","useEffect","Object","keys","topic","useMemo","unsubscribe","callback","cb","subscribe","publish","createElement","Provider","LightboxPropsContext","useLightboxProps","LightboxPropsProvider","LightboxStateContext","useLightboxState","LightboxDispatchContext","useLightboxDispatch","reducer","state","action","increment","globalIndex","currentIndex","currentSlide","duration","LightboxStateProvider","dispatch","useReducer","TimeoutsContext","useTimeouts","TimeoutsProvider","timeouts","tid","clearTimeout","removeTimeout","id","setTimeout","fn","delay","IconButton","forwardRef","label$1","icon","Icon","renderIcon","onClick","style","rest","svgIcon","xmlns","viewBox","focusable","displayName","createIcon","glyph","fill","d","createIconDisabled","Fragment","stroke","strokeWidth","mask","CloseIcon","PreviousIcon","NextIcon","LoadingIcon","Array","from","map","_","array","x1","y1","x2","y2","strokeLinecap","strokeOpacity","transform","ErrorIcon","useLayoutEffect","useMotionPreference","reduceMotion","setReduceMotion","_b","mediaQuery","matchMedia","call","matches","listener","addEventListener","removeEventListener","currentTransformation","x","y","z","matrix","getComputedStyle","matcher","match","values","split","useAnimation","nodeRef","computeAnimation","snapshot","useRef","_c","current","keyframes","onfinish","getBoundingClientRect","cancel","animate","err","console","error","prepareAnimation","currentSnapshot","isAnimationPlaying","playState","useContainerRect","containerRef","observerRef","setContainerRect","setContainerRef","useCallback","disconnect","updateContainerRect","parse","parseFloat","clientWidth","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","ResizeObserver","observe","useDelay","timeoutId","useEventCallback","args","setRef","useForkRef","refA","refB","refValue","useLoseFocus","focused","onFocus","onBlur","useRTL","isRTL","setIsRTL","document","documentElement","direction","useSensors","subscribers","notifySubscribers","isPropagationStopped","registerSensors","onPointerMove","onPointerUp","onPointerLeave","onPointerCancel","onKeyUp","subscribeSensors","unshift","listeners","el","useThrottle","lastCallbackTime","delayCallback","executeCallback","Date","now","slidePrefix","slideImagePrefix","ImageSlide","offset","rect","onLoad","_d","_e","_f","_g","status","setStatus","imageRef","handleLoading","img","decode","Promise","resolve","catch","then","parentNode","setImageRef","complete","handleOnLoad","currentTarget","onError","cover","nonInfinite","fallback","isFinite","maxWidth","srcSet","concat","naturalWidth","maxHeight","naturalHeight","defaultStyle","sort","a","b","src","estimateActualWidth","MAX_VALUE","sizes","imagePropsStyle","imagePropsClassName","restImageProps","draggable","alt","iconLoading","iconError","SwipeState","usePointerEvents","Gesture","SWIPE_THRESHOLD","usePointerSwipe","isSwipeValid","containerWidth","swipeAnimationDuration","onSwipeStart","onSwipeProgress","onSwipeFinish","onSwipeCancel","pullUpEnabled","pullDownEnabled","onPullStart","onPullProgress","onPullFinish","onPullCancel","pointers","activePointer","startTime","gesture","NONE","clearPointer","pointerId","currentPointers","p","addPointer","persist","exceedsPullThreshold","threshold","find","currentOffset","SWIPE","abs","PULL","pointer","isCurrentPointer","deltaX","clientX","deltaY","clientY","startGesture","newGesture","WHEEL","preventDefault","ctrlKey","usePreventSwipeNavigation","passive","useWheelSwipe","swipeState","intent","intentCleanup","resetCleanup","wheelResidualMomentum","cancelSwipeIntentCleanup","cancelSwipeResetCleanup","handleCleanup","handleCancelSwipe","currentSwipeOffset","currentSwipeIntent","newSwipeOffset","sign","cssContainerPrefix","ControllerContext","useController","Controller","toolbarWidth","setToolbarWidth","setSwipeState","swipeOffset","pullOffset","pullOpacity","cleanupAnimationIncrement","cleanupSwipeOffset","cleanupPullOffset","handleContainerRef","carouselRef","setCarouselRef","rtl","getLightboxProps","getLightboxState","prev","params","next","setSwipeOffset","setProperty","setPullOffset","minOpacity","offsetValue","preparePullAnimation","translate","opacity","pull","ANIMATION","parsedSpacing","spacingValue","swipeDuration","swipeEasing","count","newSwipeState","newSwipeAnimationDuration","elapsedTime","expectedTime","swipeParams","pullParams","focusOnMount","querySelector","onViewCallback","view","slideRect","useImperativeHandle","container","role","tabIndex","controls","ControllerModule","cssPrefix$2","cssSlidePrefix","CarouselSlide","click","renderSlide","rendered","slideHeader","slideContainer","slideFooter","handleBackdropClick","HTMLElement","classList","Placeholder","Carousel","items","i","CarouselModule","useNavigationState","prevDisabled","nextDisabled","useKeyboardNavigation","throttle","handleKeyDown","NavigationButton","Navigation","buttonPrev","buttonNext","iconPrev","iconNext","navigationPrev","navigationNext","NavigationModule","noScrollPadding","isHTMLElement","element","padScrollbar","property","computedValue","originalValue","getPropertyValue","removeProperty","NoScroll","body","scrollbar","innerWidth","elements","getElementsByTagName","add","clean","NoScrollModule","cssPrefix$1","setAttribute","attribute","previousValue","getAttribute","removeAttribute","Portal","mounted","setMounted","visible","setVisible","restoreFocus","animationDuration","handleClose","exiting","exited","handleEnter","scrollTop","entering","indexOf","tagName","entered","handleRef","relatedTarget","PortalModule","Root","RootModule","cssPrefix","Toolbar","buttonClose","iconClose","renderCloseButton","ToolbarModule","renderNode","child","mergeAnimation","defaultAnimation","defaultAnimationEasing","restDefaultAnimation","restAnimation","Lightbox","restProps","defaultCarousel","defaultRender","defaultToolbar","defaultController","defaultNoScroll","defaultOn","defaultSlides","defaultIndex","defaultPlugins","restDefaultProps","default"],"mappings":"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","sourcesContent":["'use client';\nimport * as React from 'react';\nimport { IMAGE_FIT_COVER, IMAGE_FIT_CONTAIN, ACTION_CLOSE, MODULE_CONTROLLER, UNKNOWN_ACTION_TYPE, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_CANCEL, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_WHEEL, SLIDE_STATUS_LOADING, activeSlideStatus, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_PLACEHOLDER, ACTION_PREV, ACTION_NEXT, ACTION_SWIPE, MODULE_PORTAL, CLASS_FLEX_CENTER, MODULE_CAROUSEL, CLASS_SLIDE_WRAPPER, VK_ARROW_RIGHT, VK_ARROW_LEFT, VK_ESCAPE, MODULE_NAVIGATION, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, MODULE_NO_SCROLL, MODULE_ROOT, MODULE_TOOLBAR } from './types.js';\nimport { createPortal } from 'react-dom';\nexport { ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_ERROR, ACTIVE_SLIDE_LOADING, ACTIVE_SLIDE_PLAYING, CLASS_FULLSIZE, PLUGIN_CAPTIONS, PLUGIN_COUNTER, PLUGIN_DOWNLOAD, PLUGIN_FULLSCREEN, PLUGIN_INLINE, PLUGIN_SHARE, PLUGIN_SLIDESHOW, PLUGIN_THUMBNAILS, PLUGIN_ZOOM, SLIDE_STATUS_PLAYING } from './types.js';\n\nconst clsx = (...classes) => [...classes].filter((cls) => Boolean(cls)).join(\" \");\nconst cssPrefix$3 = \"yarl__\";\nconst cssClass = (name) => `${cssPrefix$3}${name}`;\nconst cssVar = (name) => `--${cssPrefix$3}${name}`;\nconst composePrefix = (base, prefix) => `${base}${prefix ? `_${prefix}` : \"\"}`;\nconst makeComposePrefix = (base) => (prefix) => composePrefix(base, prefix);\nconst label = (labels, lbl) => (labels && labels[lbl] ? labels[lbl] : lbl);\nconst cleanup = (...cleaners) => () => {\n    cleaners.forEach((cleaner) => {\n        cleaner();\n    });\n};\nconst makeUseContext = (name, contextName, context) => () => {\n    const ctx = React.useContext(context);\n    if (!ctx) {\n        throw new Error(`${name} must be used within a ${contextName}.Provider`);\n    }\n    return ctx;\n};\nconst hasWindow = () => typeof window !== \"undefined\";\nfunction round(value, decimals = 0) {\n    const factor = 10 ** decimals;\n    return Math.round((value + Number.EPSILON) * factor) / factor;\n}\nconst isImageSlide = (slide) => slide.type === undefined || slide.type === \"image\";\nconst isImageFitCover = (image, imageFit) => image.imageFit === IMAGE_FIT_COVER || (image.imageFit !== IMAGE_FIT_CONTAIN && imageFit === IMAGE_FIT_COVER);\nfunction parseInt(value) {\n    return typeof value === \"string\" ? Number.parseInt(value, 10) : value;\n}\nfunction parseLengthPercentage(input) {\n    if (typeof input === \"number\") {\n        return { pixel: input };\n    }\n    if (typeof input === \"string\") {\n        const value = parseInt(input);\n        return input.endsWith(\"%\") ? { percent: value } : { pixel: value };\n    }\n    return { pixel: 0 };\n}\nfunction computeSlideRect(containerRect, padding) {\n    const paddingValue = parseLengthPercentage(padding);\n    const paddingPixels = paddingValue.percent !== undefined ? (containerRect.width / 100) * paddingValue.percent : paddingValue.pixel;\n    return {\n        width: Math.max(containerRect.width - 2 * paddingPixels, 0),\n        height: Math.max(containerRect.height - 2 * paddingPixels, 0),\n    };\n}\nconst devicePixelRatio = () => (hasWindow() ? window === null || window === void 0 ? void 0 : window.devicePixelRatio : undefined) || 1;\nconst getSlideIndex = (index, slidesCount) => slidesCount > 0 ? ((index % slidesCount) + slidesCount) % slidesCount : 0;\nconst hasSlides = (slides) => slides.length > 0;\nconst getSlide = (slides, index) => slides[getSlideIndex(index, slides.length)];\nconst getSlideIfPresent = (slides, index) => hasSlides(slides) ? getSlide(slides, index) : undefined;\nfunction addToolbarButton(toolbar, key, button) {\n    if (!button)\n        return toolbar;\n    const { buttons, ...restToolbar } = toolbar;\n    const index = buttons.findIndex((item) => item === key);\n    const buttonWithKey = React.isValidElement(button) ? React.cloneElement(button, { key }, null) : button;\n    if (index >= 0) {\n        const result = [...buttons];\n        result.splice(index, 1, buttonWithKey);\n        return { buttons: result, ...restToolbar };\n    }\n    return { buttons: [buttonWithKey, ...buttons], ...restToolbar };\n}\nfunction stopNavigationEventsPropagation() {\n    const stopPropagation = (event) => {\n        event.stopPropagation();\n    };\n    return { onPointerDown: stopPropagation, onKeyDown: stopPropagation, onWheel: stopPropagation };\n}\nfunction calculatePreload(carousel, slides, minimum = 0) {\n    return Math.min(carousel.preload, Math.max(carousel.finite ? slides.length - 1 : Math.floor(slides.length / 2), minimum));\n}\n\nconst LightboxDefaultProps = {\n    open: false,\n    close: () => { },\n    index: 0,\n    slides: [],\n    render: {},\n    plugins: [],\n    toolbar: { buttons: [ACTION_CLOSE] },\n    labels: {},\n    animation: {\n        fade: 250,\n        swipe: 500,\n        easing: {\n            fade: \"ease\",\n            swipe: \"ease-out\",\n            navigation: \"ease-in-out\",\n        },\n    },\n    carousel: {\n        finite: false,\n        preload: 2,\n        padding: \"16px\",\n        spacing: \"30%\",\n        imageFit: IMAGE_FIT_CONTAIN,\n        imageProps: {},\n    },\n    controller: {\n        ref: null,\n        focus: true,\n        aria: false,\n        touchAction: \"none\",\n        closeOnPullUp: false,\n        closeOnPullDown: false,\n        closeOnBackdropClick: false,\n    },\n    portal: {},\n    noScroll: {\n        disabled: false,\n    },\n    on: {},\n    styles: {},\n    className: \"\",\n};\n\nfunction createModule(name, component) {\n    return { name, component };\n}\nfunction createNode(module, children) {\n    return { module, children };\n}\nfunction traverseNode(node, target, apply) {\n    if (node.module.name === target) {\n        return apply(node);\n    }\n    if (node.children) {\n        return [\n            createNode(node.module, node.children.flatMap((n) => { var _a; return (_a = traverseNode(n, target, apply)) !== null && _a !== void 0 ? _a : []; })),\n        ];\n    }\n    return [node];\n}\nfunction traverse(nodes, target, apply) {\n    return nodes.flatMap((node) => { var _a; return (_a = traverseNode(node, target, apply)) !== null && _a !== void 0 ? _a : []; });\n}\nfunction withPlugins(root, plugins = [], augmentations = []) {\n    let config = root;\n    const contains = (target) => {\n        const nodes = [...config];\n        while (nodes.length > 0) {\n            const node = nodes.pop();\n            if ((node === null || node === void 0 ? void 0 : node.module.name) === target)\n                return true;\n            if (node === null || node === void 0 ? void 0 : node.children)\n                nodes.push(...node.children);\n        }\n        return false;\n    };\n    const addParent = (target, module) => {\n        if (target === \"\") {\n            config = [createNode(module, config)];\n            return;\n        }\n        config = traverse(config, target, (node) => [createNode(module, [node])]);\n    };\n    const append = (target, module) => {\n        config = traverse(config, target, (node) => [createNode(node.module, [createNode(module, node.children)])]);\n    };\n    const addChild = (target, module, precede) => {\n        config = traverse(config, target, (node) => {\n            var _a;\n            return [\n                createNode(node.module, [\n                    ...(precede ? [createNode(module)] : []),\n                    ...((_a = node.children) !== null && _a !== void 0 ? _a : []),\n                    ...(!precede ? [createNode(module)] : []),\n                ]),\n            ];\n        });\n    };\n    const addSibling = (target, module, precede) => {\n        config = traverse(config, target, (node) => [\n            ...(precede ? [createNode(module)] : []),\n            node,\n            ...(!precede ? [createNode(module)] : []),\n        ]);\n    };\n    const addModule = (module) => {\n        append(MODULE_CONTROLLER, module);\n    };\n    const replace = (target, module) => {\n        config = traverse(config, target, (node) => [createNode(module, node.children)]);\n    };\n    const remove = (target) => {\n        config = traverse(config, target, (node) => node.children);\n    };\n    const augment = (augmentation) => {\n        augmentations.push(augmentation);\n    };\n    plugins.forEach((plugin) => {\n        plugin({\n            contains,\n            addParent,\n            append,\n            addChild,\n            addSibling,\n            addModule,\n            replace,\n            remove,\n            augment,\n        });\n    });\n    return {\n        config,\n        augmentation: (props) => augmentations.reduce((acc, augmentation) => augmentation(acc), props),\n    };\n}\n\nconst EventsContext = React.createContext(null);\nconst useEvents = makeUseContext(\"useEvents\", \"EventsContext\", EventsContext);\nfunction EventsProvider({ children }) {\n    const [subscriptions] = React.useState({});\n    React.useEffect(() => () => {\n        Object.keys(subscriptions).forEach((topic) => delete subscriptions[topic]);\n    }, [subscriptions]);\n    const context = React.useMemo(() => {\n        const unsubscribe = (topic, callback) => {\n            var _a;\n            (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.splice(0, subscriptions[topic].length, ...subscriptions[topic].filter((cb) => cb !== callback));\n        };\n        const subscribe = (topic, callback) => {\n            if (!subscriptions[topic]) {\n                subscriptions[topic] = [];\n            }\n            subscriptions[topic].push(callback);\n            return () => unsubscribe(topic, callback);\n        };\n        const publish = (...[topic, event]) => {\n            var _a;\n            (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.forEach((callback) => callback(event));\n        };\n        return { publish, subscribe, unsubscribe };\n    }, [subscriptions]);\n    return React.createElement(EventsContext.Provider, { value: context }, children);\n}\n\nconst LightboxPropsContext = React.createContext(null);\nconst useLightboxProps = makeUseContext(\"useLightboxProps\", \"LightboxPropsContext\", LightboxPropsContext);\nfunction LightboxPropsProvider({ children, ...props }) {\n    return React.createElement(LightboxPropsContext.Provider, { value: props }, children);\n}\n\nconst LightboxStateContext = React.createContext(null);\nconst useLightboxState = makeUseContext(\"useLightboxState\", \"LightboxStateContext\", LightboxStateContext);\nconst LightboxDispatchContext = React.createContext(null);\nconst useLightboxDispatch = makeUseContext(\"useLightboxDispatch\", \"LightboxDispatchContext\", LightboxDispatchContext);\nfunction reducer(state, action) {\n    switch (action.type) {\n        case \"swipe\": {\n            const { slides } = state;\n            const increment = (action === null || action === void 0 ? void 0 : action.increment) || 0;\n            const globalIndex = state.globalIndex + increment;\n            const currentIndex = getSlideIndex(globalIndex, slides.length);\n            const currentSlide = getSlideIfPresent(slides, currentIndex);\n            const animation = increment || action.duration\n                ? {\n                    increment,\n                    duration: action.duration,\n                    easing: action.easing,\n                }\n                : undefined;\n            return { slides, currentIndex, globalIndex, currentSlide, animation };\n        }\n        case \"update\":\n            if (action.slides !== state.slides || action.index !== state.currentIndex) {\n                return {\n                    slides: action.slides,\n                    currentIndex: action.index,\n                    globalIndex: action.index,\n                    currentSlide: getSlideIfPresent(action.slides, action.index),\n                };\n            }\n            return state;\n        default:\n            throw new Error(UNKNOWN_ACTION_TYPE);\n    }\n}\nfunction LightboxStateProvider({ slides, index, children }) {\n    const [state, dispatch] = React.useReducer(reducer, {\n        slides,\n        currentIndex: index,\n        globalIndex: index,\n        currentSlide: getSlideIfPresent(slides, index),\n    });\n    React.useEffect(() => {\n        dispatch({ type: \"update\", slides, index });\n    }, [slides, index]);\n    const context = React.useMemo(() => ({ ...state, state, dispatch }), [state, dispatch]);\n    return (React.createElement(LightboxDispatchContext.Provider, { value: dispatch },\n        React.createElement(LightboxStateContext.Provider, { value: context }, children)));\n}\n\nconst TimeoutsContext = React.createContext(null);\nconst useTimeouts = makeUseContext(\"useTimeouts\", \"TimeoutsContext\", TimeoutsContext);\nfunction TimeoutsProvider({ children }) {\n    const [timeouts] = React.useState([]);\n    React.useEffect(() => () => {\n        timeouts.forEach((tid) => window.clearTimeout(tid));\n        timeouts.splice(0, timeouts.length);\n    }, [timeouts]);\n    const context = React.useMemo(() => {\n        const removeTimeout = (id) => {\n            timeouts.splice(0, timeouts.length, ...timeouts.filter((tid) => tid !== id));\n        };\n        const setTimeout = (fn, delay) => {\n            const id = window.setTimeout(() => {\n                removeTimeout(id);\n                fn();\n            }, delay);\n            timeouts.push(id);\n            return id;\n        };\n        const clearTimeout = (id) => {\n            if (id !== undefined) {\n                removeTimeout(id);\n                window.clearTimeout(id);\n            }\n        };\n        return { setTimeout, clearTimeout };\n    }, [timeouts]);\n    return React.createElement(TimeoutsContext.Provider, { value: context }, children);\n}\n\nconst IconButton = React.forwardRef(function IconButton({ label: label$1, className, icon: Icon, renderIcon, onClick, style, ...rest }, ref) {\n    const { styles, labels } = useLightboxProps();\n    return (React.createElement(\"button\", { ref: ref, type: \"button\", \"aria-label\": label(labels, label$1), className: clsx(cssClass(ELEMENT_BUTTON), className), onClick: onClick, style: { ...style, ...styles.button }, ...rest }, renderIcon ? renderIcon() : React.createElement(Icon, { className: cssClass(ELEMENT_ICON), style: styles.icon })));\n});\n\nfunction svgIcon(name, children) {\n    const icon = (props) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"24\", height: \"24\", \"aria-hidden\": \"true\", focusable: \"false\", ...props }, children));\n    icon.displayName = name;\n    return icon;\n}\nfunction createIcon(name, glyph) {\n    return svgIcon(name, React.createElement(\"g\", { fill: \"currentColor\" },\n        React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n        glyph));\n}\nfunction createIconDisabled(name, glyph) {\n    return svgIcon(name, React.createElement(React.Fragment, null,\n        React.createElement(\"defs\", null,\n            React.createElement(\"mask\", { id: \"strike\" },\n                React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"white\" }),\n                React.createElement(\"path\", { d: \"M0 0L24 24\", stroke: \"black\", strokeWidth: 4 }))),\n        React.createElement(\"path\", { d: \"M0.70707 2.121320L21.878680 23.292883\", stroke: \"currentColor\", strokeWidth: 2 }),\n        React.createElement(\"g\", { fill: \"currentColor\", mask: \"url(#strike)\" },\n            React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n            glyph)));\n}\nconst CloseIcon = createIcon(\"Close\", React.createElement(\"path\", { d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" }));\nconst PreviousIcon = createIcon(\"Previous\", React.createElement(\"path\", { d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\" }));\nconst NextIcon = createIcon(\"Next\", React.createElement(\"path\", { d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\" }));\nconst LoadingIcon = createIcon(\"Loading\", React.createElement(React.Fragment, null, Array.from({ length: 8 }).map((_, index, array) => (React.createElement(\"line\", { key: index, x1: \"12\", y1: \"6.5\", x2: \"12\", y2: \"1.8\", strokeLinecap: \"round\", strokeWidth: \"2.6\", stroke: \"currentColor\", strokeOpacity: (1 / array.length) * (index + 1), transform: `rotate(${(360 / array.length) * index}, 12, 12)` })))));\nconst ErrorIcon = createIcon(\"Error\", React.createElement(\"path\", { d: \"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z\" }));\n\nconst useLayoutEffect = hasWindow() ? React.useLayoutEffect : React.useEffect;\n\nfunction useMotionPreference() {\n    const [reduceMotion, setReduceMotion] = React.useState(false);\n    React.useEffect(() => {\n        var _a, _b;\n        const mediaQuery = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, \"(prefers-reduced-motion: reduce)\");\n        setReduceMotion(mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.matches);\n        const listener = (event) => setReduceMotion(event.matches);\n        (_b = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.addEventListener) === null || _b === void 0 ? void 0 : _b.call(mediaQuery, \"change\", listener);\n        return () => { var _a; return (_a = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(mediaQuery, \"change\", listener); };\n    }, []);\n    return reduceMotion;\n}\n\nfunction currentTransformation(node) {\n    let x = 0;\n    let y = 0;\n    let z = 0;\n    const matrix = window.getComputedStyle(node).transform;\n    const matcher = matrix.match(/matrix.*\\((.+)\\)/);\n    if (matcher) {\n        const values = matcher[1].split(\",\").map(parseInt);\n        if (values.length === 6) {\n            x = values[4];\n            y = values[5];\n        }\n        else if (values.length === 16) {\n            x = values[12];\n            y = values[13];\n            z = values[14];\n        }\n    }\n    return { x, y, z };\n}\nfunction useAnimation(nodeRef, computeAnimation) {\n    const snapshot = React.useRef();\n    const animation = React.useRef();\n    const reduceMotion = useMotionPreference();\n    useLayoutEffect(() => {\n        var _a, _b, _c;\n        if (nodeRef.current && snapshot.current !== undefined && !reduceMotion) {\n            const { keyframes, duration, easing, onfinish } = computeAnimation(snapshot.current, nodeRef.current.getBoundingClientRect(), currentTransformation(nodeRef.current)) || {};\n            if (keyframes && duration) {\n                (_a = animation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n                animation.current = undefined;\n                try {\n                    animation.current = (_c = (_b = nodeRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, keyframes, { duration, easing });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n                if (animation.current) {\n                    animation.current.onfinish = () => {\n                        animation.current = undefined;\n                        onfinish === null || onfinish === void 0 ? void 0 : onfinish();\n                    };\n                }\n            }\n        }\n        snapshot.current = undefined;\n    });\n    return {\n        prepareAnimation: (currentSnapshot) => {\n            snapshot.current = currentSnapshot;\n        },\n        isAnimationPlaying: () => { var _a; return ((_a = animation.current) === null || _a === void 0 ? void 0 : _a.playState) === \"running\"; },\n    };\n}\n\nfunction useContainerRect() {\n    const containerRef = React.useRef(null);\n    const observerRef = React.useRef();\n    const [containerRect, setContainerRect] = React.useState();\n    const setContainerRef = React.useCallback((node) => {\n        containerRef.current = node;\n        if (observerRef.current) {\n            observerRef.current.disconnect();\n            observerRef.current = undefined;\n        }\n        const updateContainerRect = () => {\n            if (node) {\n                const styles = window.getComputedStyle(node);\n                const parse = (value) => parseFloat(value) || 0;\n                setContainerRect({\n                    width: Math.round(node.clientWidth - parse(styles.paddingLeft) - parse(styles.paddingRight)),\n                    height: Math.round(node.clientHeight - parse(styles.paddingTop) - parse(styles.paddingBottom)),\n                });\n            }\n            else {\n                setContainerRect(undefined);\n            }\n        };\n        updateContainerRect();\n        if (node && typeof ResizeObserver !== \"undefined\") {\n            observerRef.current = new ResizeObserver(updateContainerRect);\n            observerRef.current.observe(node);\n        }\n    }, []);\n    return { setContainerRef, containerRef, containerRect };\n}\n\nfunction useDelay() {\n    const timeoutId = React.useRef();\n    const { setTimeout, clearTimeout } = useTimeouts();\n    return React.useCallback((callback, delay) => {\n        clearTimeout(timeoutId.current);\n        timeoutId.current = setTimeout(callback, delay > 0 ? delay : 0);\n    }, [setTimeout, clearTimeout]);\n}\n\nfunction useEventCallback(fn) {\n    const ref = React.useRef(fn);\n    useLayoutEffect(() => {\n        ref.current = fn;\n    });\n    return React.useCallback((...args) => { var _a; return (_a = ref.current) === null || _a === void 0 ? void 0 : _a.call(ref, ...args); }, []);\n}\n\nfunction setRef(ref, value) {\n    if (typeof ref === \"function\") {\n        ref(value);\n    }\n    else if (ref) {\n        ref.current = value;\n    }\n}\nfunction useForkRef(refA, refB) {\n    return React.useMemo(() => refA == null && refB == null\n        ? null\n        : (refValue) => {\n            setRef(refA, refValue);\n            setRef(refB, refValue);\n        }, [refA, refB]);\n}\n\nfunction useLoseFocus(focus, disabled = false) {\n    const focused = React.useRef();\n    useLayoutEffect(() => {\n        if (disabled && focused.current) {\n            focused.current = false;\n            focus();\n        }\n    }, [disabled, focus]);\n    const onFocus = React.useCallback(() => {\n        focused.current = true;\n    }, []);\n    const onBlur = React.useCallback(() => {\n        focused.current = false;\n    }, []);\n    return { onFocus, onBlur };\n}\n\nfunction useRTL() {\n    const [isRTL, setIsRTL] = React.useState(false);\n    useLayoutEffect(() => {\n        setIsRTL(window.getComputedStyle(window.document.documentElement).direction === \"rtl\");\n    }, []);\n    return isRTL;\n}\n\nfunction useSensors() {\n    const [subscribers] = React.useState({});\n    const notifySubscribers = React.useCallback((type, event) => {\n        var _a;\n        (_a = subscribers[type]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => {\n            if (!event.isPropagationStopped())\n                listener(event);\n        });\n    }, [subscribers]);\n    const registerSensors = React.useMemo(() => ({\n        onPointerDown: (event) => notifySubscribers(EVENT_ON_POINTER_DOWN, event),\n        onPointerMove: (event) => notifySubscribers(EVENT_ON_POINTER_MOVE, event),\n        onPointerUp: (event) => notifySubscribers(EVENT_ON_POINTER_UP, event),\n        onPointerLeave: (event) => notifySubscribers(EVENT_ON_POINTER_LEAVE, event),\n        onPointerCancel: (event) => notifySubscribers(EVENT_ON_POINTER_CANCEL, event),\n        onKeyDown: (event) => notifySubscribers(EVENT_ON_KEY_DOWN, event),\n        onKeyUp: (event) => notifySubscribers(EVENT_ON_KEY_UP, event),\n        onWheel: (event) => notifySubscribers(EVENT_ON_WHEEL, event),\n    }), [notifySubscribers]);\n    const subscribeSensors = React.useCallback((type, callback) => {\n        if (!subscribers[type]) {\n            subscribers[type] = [];\n        }\n        subscribers[type].unshift(callback);\n        return () => {\n            const listeners = subscribers[type];\n            if (listeners) {\n                listeners.splice(0, listeners.length, ...listeners.filter((el) => el !== callback));\n            }\n        };\n    }, [subscribers]);\n    return { registerSensors, subscribeSensors };\n}\n\nfunction useThrottle(callback, delay) {\n    const lastCallbackTime = React.useRef(0);\n    const delayCallback = useDelay();\n    const executeCallback = useEventCallback((...args) => {\n        lastCallbackTime.current = Date.now();\n        callback(args);\n    });\n    return React.useCallback((...args) => {\n        delayCallback(() => {\n            executeCallback(args);\n        }, delay - (Date.now() - lastCallbackTime.current));\n    }, [delay, executeCallback, delayCallback]);\n}\n\nconst slidePrefix = makeComposePrefix(\"slide\");\nconst slideImagePrefix = makeComposePrefix(\"slide_image\");\nfunction ImageSlide({ slide: image, offset, render, rect, imageFit, imageProps, onClick, onLoad, style, }) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const [status, setStatus] = React.useState(SLIDE_STATUS_LOADING);\n    const { publish } = useEvents();\n    const { setTimeout } = useTimeouts();\n    const imageRef = React.useRef(null);\n    React.useEffect(() => {\n        if (offset === 0) {\n            publish(activeSlideStatus(status));\n        }\n    }, [offset, status, publish]);\n    const handleLoading = useEventCallback((img) => {\n        (\"decode\" in img ? img.decode() : Promise.resolve())\n            .catch(() => { })\n            .then(() => {\n            if (!img.parentNode) {\n                return;\n            }\n            setStatus(SLIDE_STATUS_COMPLETE);\n            setTimeout(() => {\n                onLoad === null || onLoad === void 0 ? void 0 : onLoad(img);\n            }, 0);\n        });\n    });\n    const setImageRef = React.useCallback((img) => {\n        imageRef.current = img;\n        if (img === null || img === void 0 ? void 0 : img.complete) {\n            handleLoading(img);\n        }\n    }, [handleLoading]);\n    const handleOnLoad = React.useCallback((event) => {\n        handleLoading(event.currentTarget);\n    }, [handleLoading]);\n    const onError = React.useCallback(() => {\n        setStatus(SLIDE_STATUS_ERROR);\n    }, []);\n    const cover = isImageFitCover(image, imageFit);\n    const nonInfinite = (value, fallback) => (Number.isFinite(value) ? value : fallback);\n    const maxWidth = nonInfinite(Math.max(...((_b = (_a = image.srcSet) === null || _a === void 0 ? void 0 : _a.map((x) => x.width)) !== null && _b !== void 0 ? _b : []).concat(image.width ? [image.width] : []).filter(Boolean)), ((_c = imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalWidth) || 0);\n    const maxHeight = nonInfinite(Math.max(...((_e = (_d = image.srcSet) === null || _d === void 0 ? void 0 : _d.map((x) => x.height)) !== null && _e !== void 0 ? _e : []).concat(image.height ? [image.height] : []).filter(Boolean)), ((_f = imageRef.current) === null || _f === void 0 ? void 0 : _f.naturalHeight) || 0);\n    const defaultStyle = maxWidth && maxHeight\n        ? {\n            maxWidth: `min(${maxWidth}px, 100%)`,\n            maxHeight: `min(${maxHeight}px, 100%)`,\n        }\n        : {\n            maxWidth: \"100%\",\n            maxHeight: \"100%\",\n        };\n    const srcSet = (_g = image.srcSet) === null || _g === void 0 ? void 0 : _g.sort((a, b) => a.width - b.width).map((item) => `${item.src} ${item.width}w`).join(\", \");\n    const estimateActualWidth = () => rect && !cover && image.width && image.height ? (rect.height / image.height) * image.width : Number.MAX_VALUE;\n    const sizes = srcSet && rect && hasWindow() ? `${Math.round(Math.min(estimateActualWidth(), rect.width))}px` : undefined;\n    const { style: imagePropsStyle, className: imagePropsClassName, ...restImageProps } = imageProps || {};\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"img\", { ref: setImageRef, onLoad: handleOnLoad, onError: onError, onClick: onClick, draggable: false, className: clsx(cssClass(slideImagePrefix()), cover && cssClass(slideImagePrefix(\"cover\")), status !== SLIDE_STATUS_COMPLETE && cssClass(slideImagePrefix(\"loading\")), imagePropsClassName), style: { ...defaultStyle, ...style, ...imagePropsStyle }, ...restImageProps, alt: image.alt, sizes: sizes, srcSet: srcSet, src: image.src }),\n        status !== SLIDE_STATUS_COMPLETE && (React.createElement(\"div\", { className: cssClass(slidePrefix(SLIDE_STATUS_PLACEHOLDER)) },\n            status === SLIDE_STATUS_LOADING &&\n                ((render === null || render === void 0 ? void 0 : render.iconLoading) ? (render.iconLoading()) : (React.createElement(LoadingIcon, { className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_LOADING))) }))),\n            status === SLIDE_STATUS_ERROR &&\n                ((render === null || render === void 0 ? void 0 : render.iconError) ? (render.iconError()) : (React.createElement(ErrorIcon, { className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_ERROR))) })))))));\n}\n\nvar SwipeState;\n(function (SwipeState) {\n    SwipeState[SwipeState[\"NONE\"] = 0] = \"NONE\";\n    SwipeState[SwipeState[\"SWIPE\"] = 1] = \"SWIPE\";\n    SwipeState[SwipeState[\"PULL\"] = 2] = \"PULL\";\n    SwipeState[SwipeState[\"ANIMATION\"] = 3] = \"ANIMATION\";\n})(SwipeState || (SwipeState = {}));\n\nfunction usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled) {\n    React.useEffect(() => !disabled\n        ? cleanup(subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp))\n        : () => { }, [subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled]);\n}\n\nvar Gesture;\n(function (Gesture) {\n    Gesture[Gesture[\"NONE\"] = 0] = \"NONE\";\n    Gesture[Gesture[\"SWIPE\"] = 1] = \"SWIPE\";\n    Gesture[Gesture[\"PULL\"] = 2] = \"PULL\";\n})(Gesture || (Gesture = {}));\nconst SWIPE_THRESHOLD = 30;\nfunction usePointerSwipe(subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel, pullUpEnabled, pullDownEnabled, onPullStart, onPullProgress, onPullFinish, onPullCancel) {\n    const offset = React.useRef(0);\n    const pointers = React.useRef([]);\n    const activePointer = React.useRef();\n    const startTime = React.useRef(0);\n    const gesture = React.useRef(Gesture.NONE);\n    const clearPointer = React.useCallback((event) => {\n        if (activePointer.current === event.pointerId) {\n            activePointer.current = undefined;\n            gesture.current = Gesture.NONE;\n        }\n        const currentPointers = pointers.current;\n        currentPointers.splice(0, currentPointers.length, ...currentPointers.filter((p) => p.pointerId !== event.pointerId));\n    }, []);\n    const addPointer = React.useCallback((event) => {\n        clearPointer(event);\n        event.persist();\n        pointers.current.push(event);\n    }, [clearPointer]);\n    const onPointerDown = useEventCallback((event) => {\n        addPointer(event);\n    });\n    const exceedsPullThreshold = (value, threshold) => (pullDownEnabled && value > threshold) || (pullUpEnabled && value < -threshold);\n    const onPointerUp = useEventCallback((event) => {\n        if (pointers.current.find((x) => x.pointerId === event.pointerId) && activePointer.current === event.pointerId) {\n            const duration = Date.now() - startTime.current;\n            const currentOffset = offset.current;\n            if (gesture.current === Gesture.SWIPE) {\n                if (Math.abs(currentOffset) > 0.3 * containerWidth ||\n                    (Math.abs(currentOffset) > 5 && duration < swipeAnimationDuration)) {\n                    onSwipeFinish(currentOffset, duration);\n                }\n                else {\n                    onSwipeCancel(currentOffset);\n                }\n            }\n            else if (gesture.current === Gesture.PULL) {\n                if (exceedsPullThreshold(currentOffset, 2 * SWIPE_THRESHOLD)) {\n                    onPullFinish(currentOffset, duration);\n                }\n                else {\n                    onPullCancel(currentOffset);\n                }\n            }\n            offset.current = 0;\n            gesture.current = Gesture.NONE;\n        }\n        clearPointer(event);\n    });\n    const onPointerMove = useEventCallback((event) => {\n        const pointer = pointers.current.find((p) => p.pointerId === event.pointerId);\n        if (pointer) {\n            const isCurrentPointer = activePointer.current === event.pointerId;\n            if (event.buttons === 0) {\n                if (isCurrentPointer && offset.current !== 0) {\n                    onPointerUp(event);\n                }\n                else {\n                    clearPointer(pointer);\n                }\n                return;\n            }\n            const deltaX = event.clientX - pointer.clientX;\n            const deltaY = event.clientY - pointer.clientY;\n            if (activePointer.current === undefined) {\n                const startGesture = (newGesture) => {\n                    addPointer(event);\n                    activePointer.current = event.pointerId;\n                    startTime.current = Date.now();\n                    gesture.current = newGesture;\n                };\n                if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > SWIPE_THRESHOLD && isSwipeValid(deltaX)) {\n                    startGesture(Gesture.SWIPE);\n                    onSwipeStart();\n                }\n                else if (Math.abs(deltaY) > Math.abs(deltaX) && exceedsPullThreshold(deltaY, SWIPE_THRESHOLD)) {\n                    startGesture(Gesture.PULL);\n                    onPullStart();\n                }\n            }\n            else if (isCurrentPointer) {\n                if (gesture.current === Gesture.SWIPE) {\n                    offset.current = deltaX;\n                    onSwipeProgress(deltaX);\n                }\n                else if (gesture.current === Gesture.PULL) {\n                    offset.current = deltaY;\n                    onPullProgress(deltaY);\n                }\n            }\n        }\n    });\n    usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp);\n}\n\nconst WHEEL = \"wheel\";\nfunction preventDefault(event) {\n    if (Math.abs(event.deltaX) > Math.abs(event.deltaY) || event.ctrlKey) {\n        event.preventDefault();\n    }\n}\nfunction usePreventSwipeNavigation() {\n    const ref = React.useRef(null);\n    return React.useCallback((node) => {\n        var _a;\n        if (node) {\n            node.addEventListener(WHEEL, preventDefault, { passive: false });\n        }\n        else {\n            (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(WHEEL, preventDefault);\n        }\n        ref.current = node;\n    }, []);\n}\n\nfunction useWheelSwipe(swipeState, subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel) {\n    const offset = React.useRef(0);\n    const intent = React.useRef(0);\n    const intentCleanup = React.useRef();\n    const resetCleanup = React.useRef();\n    const wheelResidualMomentum = React.useRef(0);\n    const startTime = React.useRef(0);\n    const { setTimeout, clearTimeout } = useTimeouts();\n    const cancelSwipeIntentCleanup = React.useCallback(() => {\n        if (intentCleanup.current) {\n            clearTimeout(intentCleanup.current);\n            intentCleanup.current = undefined;\n        }\n    }, [clearTimeout]);\n    const cancelSwipeResetCleanup = React.useCallback(() => {\n        if (resetCleanup.current) {\n            clearTimeout(resetCleanup.current);\n            resetCleanup.current = undefined;\n        }\n    }, [clearTimeout]);\n    const handleCleanup = useEventCallback(() => {\n        if (swipeState !== SwipeState.SWIPE) {\n            offset.current = 0;\n            startTime.current = 0;\n            cancelSwipeIntentCleanup();\n            cancelSwipeResetCleanup();\n        }\n    });\n    React.useEffect(handleCleanup, [swipeState, handleCleanup]);\n    const handleCancelSwipe = useEventCallback((currentSwipeOffset) => {\n        resetCleanup.current = undefined;\n        if (offset.current === currentSwipeOffset) {\n            onSwipeCancel(offset.current);\n        }\n    });\n    const onWheel = useEventCallback((event) => {\n        if (event.ctrlKey) {\n            return;\n        }\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n            return;\n        }\n        if (swipeState === SwipeState.NONE) {\n            if (Math.abs(event.deltaX) <= 1.2 * Math.abs(wheelResidualMomentum.current)) {\n                wheelResidualMomentum.current = event.deltaX;\n                return;\n            }\n            if (!isSwipeValid(-event.deltaX)) {\n                return;\n            }\n            intent.current += event.deltaX;\n            cancelSwipeIntentCleanup();\n            if (Math.abs(intent.current) > 30) {\n                intent.current = 0;\n                wheelResidualMomentum.current = 0;\n                startTime.current = Date.now();\n                onSwipeStart();\n            }\n            else {\n                const currentSwipeIntent = intent.current;\n                intentCleanup.current = setTimeout(() => {\n                    intentCleanup.current = undefined;\n                    if (currentSwipeIntent === intent.current) {\n                        intent.current = 0;\n                    }\n                }, swipeAnimationDuration);\n            }\n        }\n        else if (swipeState === SwipeState.SWIPE) {\n            let newSwipeOffset = offset.current - event.deltaX;\n            newSwipeOffset = Math.min(Math.abs(newSwipeOffset), containerWidth) * Math.sign(newSwipeOffset);\n            offset.current = newSwipeOffset;\n            onSwipeProgress(newSwipeOffset);\n            cancelSwipeResetCleanup();\n            if (Math.abs(newSwipeOffset) > 0.2 * containerWidth) {\n                wheelResidualMomentum.current = event.deltaX;\n                onSwipeFinish(newSwipeOffset, Date.now() - startTime.current);\n                return;\n            }\n            resetCleanup.current = setTimeout(() => handleCancelSwipe(newSwipeOffset), 2 * swipeAnimationDuration);\n        }\n        else {\n            wheelResidualMomentum.current = event.deltaX;\n        }\n    });\n    React.useEffect(() => subscribeSensors(EVENT_ON_WHEEL, onWheel), [subscribeSensors, onWheel]);\n}\n\nconst cssContainerPrefix = makeComposePrefix(\"container\");\nconst ControllerContext = React.createContext(null);\nconst useController = makeUseContext(\"useController\", \"ControllerContext\", ControllerContext);\nfunction Controller({ children, ...props }) {\n    var _a;\n    const { carousel, animation, controller, on, styles, render } = props;\n    const [toolbarWidth, setToolbarWidth] = React.useState();\n    const state = useLightboxState();\n    const dispatch = useLightboxDispatch();\n    const [swipeState, setSwipeState] = React.useState(SwipeState.NONE);\n    const swipeOffset = React.useRef(0);\n    const pullOffset = React.useRef(0);\n    const pullOpacity = React.useRef(1);\n    const { registerSensors, subscribeSensors } = useSensors();\n    const { subscribe, publish } = useEvents();\n    const cleanupAnimationIncrement = useDelay();\n    const cleanupSwipeOffset = useDelay();\n    const cleanupPullOffset = useDelay();\n    const { containerRef, setContainerRef, containerRect } = useContainerRect();\n    const handleContainerRef = useForkRef(usePreventSwipeNavigation(), setContainerRef);\n    const carouselRef = React.useRef(null);\n    const setCarouselRef = useForkRef(carouselRef, undefined);\n    const isRTL = useRTL();\n    const rtl = (value) => (isRTL ? -1 : 1) * (typeof value === \"number\" ? value : 1);\n    const focus = useEventCallback(() => { var _a; return (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus(); });\n    const getLightboxProps = useEventCallback(() => props);\n    const getLightboxState = useEventCallback(() => state);\n    const prev = React.useCallback((params) => publish(ACTION_PREV, params), [publish]);\n    const next = React.useCallback((params) => publish(ACTION_NEXT, params), [publish]);\n    const close = React.useCallback(() => publish(ACTION_CLOSE), [publish]);\n    const isSwipeValid = (offset) => !(carousel.finite &&\n        ((rtl(offset) > 0 && state.currentIndex === 0) ||\n            (rtl(offset) < 0 && state.currentIndex === state.slides.length - 1)));\n    const setSwipeOffset = (offset) => {\n        var _a;\n        swipeOffset.current = offset;\n        (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"swipe_offset\"), `${Math.round(offset)}px`);\n    };\n    const { closeOnPullUp, closeOnPullDown } = controller;\n    const setPullOffset = (offset) => {\n        var _a, _b;\n        pullOffset.current = offset;\n        pullOpacity.current = (() => {\n            const threshold = 60;\n            const minOpacity = 0.5;\n            const offsetValue = (() => {\n                if (closeOnPullDown && offset > 0)\n                    return offset;\n                if (closeOnPullUp && offset < 0)\n                    return -offset;\n                return 0;\n            })();\n            return Math.min(Math.max(round(1 - (offsetValue / threshold) * (1 - minOpacity), 2), minOpacity), 1);\n        })();\n        (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"pull_offset\"), `${Math.round(offset)}px`);\n        (_b = containerRef.current) === null || _b === void 0 ? void 0 : _b.style.setProperty(cssVar(\"pull_opacity\"), `${pullOpacity.current}`);\n    };\n    const { prepareAnimation: preparePullAnimation } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n        if (carouselRef.current && containerRect) {\n            return {\n                keyframes: [\n                    {\n                        transform: `translate(0, ${snapshot.rect.y - rect.y + translate.y}px)`,\n                        opacity: snapshot.opacity,\n                    },\n                    { transform: \"translate(0, 0)\", opacity: 1 },\n                ],\n                duration: snapshot.duration,\n                easing: animation.easing.fade,\n            };\n        }\n        return undefined;\n    });\n    const pull = (offset, cancel) => {\n        if (closeOnPullUp || closeOnPullDown) {\n            setPullOffset(offset);\n            let duration = 0;\n            if (carouselRef.current) {\n                duration = animation.fade * (cancel ? 2 : 1);\n                preparePullAnimation({\n                    rect: carouselRef.current.getBoundingClientRect(),\n                    opacity: pullOpacity.current,\n                    duration,\n                });\n            }\n            cleanupPullOffset(() => {\n                setPullOffset(0);\n                setSwipeState(SwipeState.NONE);\n            }, duration);\n            setSwipeState(SwipeState.ANIMATION);\n            if (!cancel) {\n                close();\n            }\n        }\n    };\n    const { prepareAnimation, isAnimationPlaying } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n        var _a;\n        if (carouselRef.current && containerRect && ((_a = state.animation) === null || _a === void 0 ? void 0 : _a.duration)) {\n            const parsedSpacing = parseLengthPercentage(carousel.spacing);\n            const spacingValue = (parsedSpacing.percent ? (parsedSpacing.percent * containerRect.width) / 100 : parsedSpacing.pixel) || 0;\n            return {\n                keyframes: [\n                    {\n                        transform: `translate(${rtl(state.globalIndex - snapshot.index) * (containerRect.width + spacingValue) +\n                            snapshot.rect.x -\n                            rect.x +\n                            translate.x}px, 0)`,\n                    },\n                    { transform: \"translate(0, 0)\" },\n                ],\n                duration: state.animation.duration,\n                easing: state.animation.easing,\n            };\n        }\n        return undefined;\n    });\n    const swipe = useEventCallback((action) => {\n        var _a, _b;\n        const currentSwipeOffset = action.offset || 0;\n        const swipeDuration = !currentSwipeOffset ? (_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe : animation.swipe;\n        const swipeEasing = !currentSwipeOffset && !isAnimationPlaying() ? animation.easing.navigation : animation.easing.swipe;\n        let { direction } = action;\n        const count = (_b = action.count) !== null && _b !== void 0 ? _b : 1;\n        let newSwipeState = SwipeState.ANIMATION;\n        let newSwipeAnimationDuration = swipeDuration * count;\n        if (!direction) {\n            const containerWidth = containerRect === null || containerRect === void 0 ? void 0 : containerRect.width;\n            const elapsedTime = action.duration || 0;\n            const expectedTime = containerWidth\n                ? (swipeDuration / containerWidth) * Math.abs(currentSwipeOffset)\n                : swipeDuration;\n            if (count !== 0) {\n                if (elapsedTime < expectedTime) {\n                    newSwipeAnimationDuration =\n                        (newSwipeAnimationDuration / expectedTime) * Math.max(elapsedTime, expectedTime / 5);\n                }\n                else if (containerWidth) {\n                    newSwipeAnimationDuration =\n                        (swipeDuration / containerWidth) * (containerWidth - Math.abs(currentSwipeOffset));\n                }\n                direction = rtl(currentSwipeOffset) > 0 ? ACTION_PREV : ACTION_NEXT;\n            }\n            else {\n                newSwipeAnimationDuration = swipeDuration / 2;\n            }\n        }\n        let increment = 0;\n        if (direction === ACTION_PREV) {\n            if (isSwipeValid(rtl(1))) {\n                increment = -count;\n            }\n            else {\n                newSwipeState = SwipeState.NONE;\n                newSwipeAnimationDuration = swipeDuration;\n            }\n        }\n        else if (direction === ACTION_NEXT) {\n            if (isSwipeValid(rtl(-1))) {\n                increment = count;\n            }\n            else {\n                newSwipeState = SwipeState.NONE;\n                newSwipeAnimationDuration = swipeDuration;\n            }\n        }\n        newSwipeAnimationDuration = Math.round(newSwipeAnimationDuration);\n        cleanupSwipeOffset(() => {\n            setSwipeOffset(0);\n            setSwipeState(SwipeState.NONE);\n        }, newSwipeAnimationDuration);\n        if (carouselRef.current) {\n            prepareAnimation({\n                rect: carouselRef.current.getBoundingClientRect(),\n                index: state.globalIndex,\n            });\n        }\n        setSwipeState(newSwipeState);\n        publish(ACTION_SWIPE, {\n            type: \"swipe\",\n            increment,\n            duration: newSwipeAnimationDuration,\n            easing: swipeEasing,\n        });\n    });\n    React.useEffect(() => {\n        var _a, _b;\n        if (((_a = state.animation) === null || _a === void 0 ? void 0 : _a.increment) && ((_b = state.animation) === null || _b === void 0 ? void 0 : _b.duration)) {\n            cleanupAnimationIncrement(() => dispatch({ type: \"swipe\", increment: 0 }), state.animation.duration);\n        }\n    }, [state.animation, dispatch, cleanupAnimationIncrement]);\n    const swipeParams = [\n        subscribeSensors,\n        isSwipeValid,\n        (containerRect === null || containerRect === void 0 ? void 0 : containerRect.width) || 0,\n        animation.swipe,\n        () => setSwipeState(SwipeState.SWIPE),\n        (offset) => setSwipeOffset(offset),\n        (offset, duration) => swipe({ offset, duration, count: 1 }),\n        (offset) => swipe({ offset, count: 0 }),\n    ];\n    const pullParams = [\n        () => {\n            if (closeOnPullDown) {\n                setSwipeState(SwipeState.PULL);\n            }\n        },\n        (offset) => setPullOffset(offset),\n        (offset) => pull(offset),\n        (offset) => pull(offset, true),\n    ];\n    usePointerSwipe(...swipeParams, closeOnPullUp, closeOnPullDown, ...pullParams);\n    useWheelSwipe(swipeState, ...swipeParams);\n    const focusOnMount = useEventCallback(() => {\n        if (controller.focus) {\n            if (document.querySelector(`.${cssClass(MODULE_PORTAL)} .${cssClass(cssContainerPrefix())}`)) {\n                focus();\n            }\n        }\n    });\n    React.useEffect(focusOnMount, [focusOnMount]);\n    const onViewCallback = useEventCallback(() => {\n        var _a;\n        (_a = on.view) === null || _a === void 0 ? void 0 : _a.call(on, { index: state.currentIndex });\n    });\n    React.useEffect(onViewCallback, [state.globalIndex, onViewCallback]);\n    React.useEffect(() => cleanup(subscribe(ACTION_PREV, (action) => swipe({ direction: ACTION_PREV, ...action })), subscribe(ACTION_NEXT, (action) => swipe({ direction: ACTION_NEXT, ...action })), subscribe(ACTION_SWIPE, (action) => dispatch(action))), [subscribe, swipe, dispatch]);\n    const context = React.useMemo(() => ({\n        prev,\n        next,\n        close,\n        focus,\n        slideRect: containerRect ? computeSlideRect(containerRect, carousel.padding) : { width: 0, height: 0 },\n        containerRect: containerRect || { width: 0, height: 0 },\n        subscribeSensors,\n        containerRef,\n        setCarouselRef,\n        toolbarWidth,\n        setToolbarWidth,\n    }), [\n        prev,\n        next,\n        close,\n        focus,\n        subscribeSensors,\n        containerRect,\n        containerRef,\n        setCarouselRef,\n        toolbarWidth,\n        setToolbarWidth,\n        carousel.padding,\n    ]);\n    React.useImperativeHandle(controller.ref, () => ({\n        prev,\n        next,\n        close,\n        focus,\n        getLightboxProps,\n        getLightboxState,\n    }), [prev, next, close, focus, getLightboxProps, getLightboxState]);\n    return (React.createElement(\"div\", { ref: handleContainerRef, className: clsx(cssClass(cssContainerPrefix()), cssClass(CLASS_FLEX_CENTER)), style: {\n            ...(swipeState === SwipeState.SWIPE\n                ? { [cssVar(\"swipe_offset\")]: `${Math.round(swipeOffset.current)}px` }\n                : null),\n            ...(swipeState === SwipeState.PULL\n                ? {\n                    [cssVar(\"pull_offset\")]: `${Math.round(pullOffset.current)}px`,\n                    [cssVar(\"pull_opacity\")]: `${pullOpacity.current}`,\n                }\n                : null),\n            ...(controller.touchAction !== \"none\" ? { [cssVar(\"controller_touch_action\")]: controller.touchAction } : null),\n            ...styles.container,\n        }, ...(controller.aria ? { role: \"presentation\", \"aria-live\": \"polite\" } : null), tabIndex: -1, ...registerSensors }, containerRect && (React.createElement(ControllerContext.Provider, { value: context },\n        children, (_a = render.controls) === null || _a === void 0 ? void 0 :\n        _a.call(render)))));\n}\nconst ControllerModule = createModule(MODULE_CONTROLLER, Controller);\n\nfunction cssPrefix$2(value) {\n    return composePrefix(MODULE_CAROUSEL, value);\n}\nfunction cssSlidePrefix(value) {\n    return composePrefix(\"slide\", value);\n}\nfunction CarouselSlide({ slide, offset }) {\n    const containerRef = React.useRef(null);\n    const { currentIndex } = useLightboxState();\n    const { slideRect, close } = useController();\n    const { render, carousel: { imageFit, imageProps }, on: { click: onClick }, controller: { closeOnBackdropClick }, styles: { slide: style }, } = useLightboxProps();\n    const renderSlide = () => {\n        var _a, _b, _c, _d;\n        let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, { slide, offset, rect: slideRect });\n        if (!rendered && isImageSlide(slide)) {\n            rendered = (React.createElement(ImageSlide, { slide: slide, offset: offset, render: render, rect: slideRect, imageFit: imageFit, imageProps: imageProps, onClick: offset === 0 ? () => onClick === null || onClick === void 0 ? void 0 : onClick({ index: currentIndex }) : undefined }));\n        }\n        return rendered ? (React.createElement(React.Fragment, null, (_b = render.slideHeader) === null || _b === void 0 ? void 0 :\n            _b.call(render, { slide }),\n            ((_c = render.slideContainer) !== null && _c !== void 0 ? _c : (({ children }) => children))({ slide, children: rendered }), (_d = render.slideFooter) === null || _d === void 0 ? void 0 :\n            _d.call(render, { slide }))) : null;\n    };\n    const handleBackdropClick = (event) => {\n        const container = containerRef.current;\n        const target = event.target instanceof HTMLElement ? event.target : undefined;\n        if (closeOnBackdropClick &&\n            target &&\n            container &&\n            (target === container ||\n                (Array.from(container.children).find((x) => x === target) &&\n                    target.classList.contains(cssClass(CLASS_SLIDE_WRAPPER))))) {\n            close();\n        }\n    };\n    return (React.createElement(\"div\", { ref: containerRef, className: clsx(cssClass(cssSlidePrefix()), offset === 0 && cssClass(cssSlidePrefix(\"current\")), cssClass(CLASS_FLEX_CENTER)), onClick: handleBackdropClick, style: style }, renderSlide()));\n}\nfunction Placeholder() {\n    const style = useLightboxProps().styles.slide;\n    return React.createElement(\"div\", { className: cssClass(\"slide\"), style: style });\n}\nfunction Carousel({ carousel }) {\n    const { slides, currentIndex, globalIndex } = useLightboxState();\n    const { setCarouselRef } = useController();\n    const spacingValue = parseLengthPercentage(carousel.spacing);\n    const paddingValue = parseLengthPercentage(carousel.padding);\n    const items = [];\n    const preload = calculatePreload(carousel, slides, 1);\n    if (hasSlides(slides)) {\n        for (let i = currentIndex - preload; i < currentIndex; i += 1) {\n            const key = globalIndex + i - currentIndex;\n            items.push(!carousel.finite || i >= 0 ? (React.createElement(CarouselSlide, { key: key, slide: slides[(i + preload * slides.length) % slides.length], offset: i - currentIndex })) : (React.createElement(Placeholder, { key: key })));\n        }\n        items.push(React.createElement(CarouselSlide, { key: globalIndex, slide: slides[currentIndex], offset: 0 }));\n        for (let i = currentIndex + 1; i <= currentIndex + preload; i += 1) {\n            const key = globalIndex + i - currentIndex;\n            items.push(!carousel.finite || i <= slides.length - 1 ? (React.createElement(CarouselSlide, { key: key, slide: slides[i % slides.length], offset: i - currentIndex })) : (React.createElement(Placeholder, { key: key })));\n        }\n    }\n    return (React.createElement(\"div\", { ref: setCarouselRef, className: clsx(cssClass(cssPrefix$2()), items.length > 0 && cssClass(cssPrefix$2(\"with_slides\"))), style: {\n            [`${cssVar(cssPrefix$2(\"slides_count\"))}`]: items.length,\n            [`${cssVar(cssPrefix$2(\"spacing_px\"))}`]: spacingValue.pixel || 0,\n            [`${cssVar(cssPrefix$2(\"spacing_percent\"))}`]: spacingValue.percent || 0,\n            [`${cssVar(cssPrefix$2(\"padding_px\"))}`]: paddingValue.pixel || 0,\n            [`${cssVar(cssPrefix$2(\"padding_percent\"))}`]: paddingValue.percent || 0,\n        } }, items));\n}\nconst CarouselModule = createModule(MODULE_CAROUSEL, Carousel);\n\nfunction useNavigationState() {\n    const { carousel } = useLightboxProps();\n    const { slides, currentIndex } = useLightboxState();\n    const prevDisabled = slides.length === 0 || (carousel.finite && currentIndex === 0);\n    const nextDisabled = slides.length === 0 || (carousel.finite && currentIndex === slides.length - 1);\n    return { prevDisabled, nextDisabled };\n}\n\nfunction useKeyboardNavigation(subscribeSensors) {\n    var _a;\n    const isRTL = useRTL();\n    const { publish } = useEvents();\n    const { animation } = useLightboxProps();\n    const { prevDisabled, nextDisabled } = useNavigationState();\n    const throttle = ((_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe) / 2;\n    const prev = useThrottle(() => publish(ACTION_PREV), throttle);\n    const next = useThrottle(() => publish(ACTION_NEXT), throttle);\n    const handleKeyDown = useEventCallback((event) => {\n        switch (event.key) {\n            case VK_ESCAPE:\n                publish(ACTION_CLOSE);\n                break;\n            case VK_ARROW_LEFT:\n                if (!(isRTL ? nextDisabled : prevDisabled))\n                    (isRTL ? next : prev)();\n                break;\n            case VK_ARROW_RIGHT:\n                if (!(isRTL ? prevDisabled : nextDisabled))\n                    (isRTL ? prev : next)();\n                break;\n            default:\n        }\n    });\n    React.useEffect(() => subscribeSensors(EVENT_ON_KEY_DOWN, handleKeyDown), [subscribeSensors, handleKeyDown]);\n}\n\nfunction NavigationButton({ label, icon, renderIcon, action, onClick, disabled, style }) {\n    return (React.createElement(IconButton, { label: label, icon: icon, renderIcon: renderIcon, className: cssClass(`navigation_${action}`), disabled: disabled, onClick: onClick, style: style, ...useLoseFocus(useController().focus, disabled) }));\n}\nfunction Navigation({ render: { buttonPrev, buttonNext, iconPrev, iconNext }, styles }) {\n    const { prev, next, subscribeSensors } = useController();\n    const { prevDisabled, nextDisabled } = useNavigationState();\n    useKeyboardNavigation(subscribeSensors);\n    return (React.createElement(React.Fragment, null,\n        buttonPrev ? (buttonPrev()) : (React.createElement(NavigationButton, { label: \"Previous\", action: ACTION_PREV, icon: PreviousIcon, renderIcon: iconPrev, style: styles.navigationPrev, disabled: prevDisabled, onClick: prev })),\n        buttonNext ? (buttonNext()) : (React.createElement(NavigationButton, { label: \"Next\", action: ACTION_NEXT, icon: NextIcon, renderIcon: iconNext, style: styles.navigationNext, disabled: nextDisabled, onClick: next }))));\n}\nconst NavigationModule = createModule(MODULE_NAVIGATION, Navigation);\n\nconst noScroll = cssClass(CLASS_NO_SCROLL);\nconst noScrollPadding = cssClass(CLASS_NO_SCROLL_PADDING);\nfunction isHTMLElement(element) {\n    return \"style\" in element;\n}\nfunction padScrollbar(element, padding, rtl) {\n    const styles = window.getComputedStyle(element);\n    const property = rtl ? \"padding-left\" : \"padding-right\";\n    const computedValue = rtl ? styles.paddingLeft : styles.paddingRight;\n    const originalValue = element.style.getPropertyValue(property);\n    element.style.setProperty(property, `${(parseInt(computedValue) || 0) + padding}px`);\n    return () => {\n        if (originalValue) {\n            element.style.setProperty(property, originalValue);\n        }\n        else {\n            element.style.removeProperty(property);\n        }\n    };\n}\nfunction NoScroll({ noScroll: { disabled }, children }) {\n    const rtl = useRTL();\n    useLayoutEffect(() => {\n        if (disabled)\n            return () => { };\n        const cleanup = [];\n        const { body, documentElement } = document;\n        const scrollbar = Math.round(window.innerWidth - documentElement.clientWidth);\n        if (scrollbar > 0) {\n            cleanup.push(padScrollbar(body, scrollbar, rtl));\n            const elements = body.getElementsByTagName(\"*\");\n            for (let i = 0; i < elements.length; i += 1) {\n                const element = elements[i];\n                if (isHTMLElement(element) &&\n                    window.getComputedStyle(element).getPropertyValue(\"position\") === \"fixed\" &&\n                    !element.classList.contains(noScrollPadding)) {\n                    cleanup.push(padScrollbar(element, scrollbar, rtl));\n                }\n            }\n        }\n        body.classList.add(noScroll);\n        return () => {\n            body.classList.remove(noScroll);\n            cleanup.forEach((clean) => clean());\n        };\n    }, [rtl, disabled]);\n    return React.createElement(React.Fragment, null, children);\n}\nconst NoScrollModule = createModule(MODULE_NO_SCROLL, NoScroll);\n\nfunction cssPrefix$1(value) {\n    return composePrefix(MODULE_PORTAL, value);\n}\nfunction setAttribute(element, attribute, value) {\n    const previousValue = element.getAttribute(attribute);\n    element.setAttribute(attribute, value);\n    return () => {\n        if (previousValue) {\n            element.setAttribute(attribute, previousValue);\n        }\n        else {\n            element.removeAttribute(attribute);\n        }\n    };\n}\nfunction Portal({ children, animation, styles, className, on, portal, close }) {\n    const [mounted, setMounted] = React.useState(false);\n    const [visible, setVisible] = React.useState(false);\n    const cleanup = React.useRef([]);\n    const restoreFocus = React.useRef(null);\n    const { setTimeout } = useTimeouts();\n    const { subscribe } = useEvents();\n    const reduceMotion = useMotionPreference();\n    const animationDuration = !reduceMotion ? animation.fade : 0;\n    React.useEffect(() => {\n        setMounted(true);\n        return () => {\n            setMounted(false);\n            setVisible(false);\n        };\n    }, []);\n    const handleCleanup = useEventCallback(() => {\n        cleanup.current.forEach((clean) => clean());\n        cleanup.current = [];\n    });\n    const handleClose = useEventCallback(() => {\n        var _a;\n        setVisible(false);\n        handleCleanup();\n        (_a = on.exiting) === null || _a === void 0 ? void 0 : _a.call(on);\n        setTimeout(() => {\n            var _a;\n            (_a = on.exited) === null || _a === void 0 ? void 0 : _a.call(on);\n            close();\n        }, animationDuration);\n    });\n    React.useEffect(() => subscribe(ACTION_CLOSE, handleClose), [subscribe, handleClose]);\n    const handleEnter = useEventCallback((node) => {\n        var _a, _b, _c;\n        node.scrollTop;\n        setVisible(true);\n        (_a = on.entering) === null || _a === void 0 ? void 0 : _a.call(on);\n        const elements = (_c = (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.children) !== null && _c !== void 0 ? _c : [];\n        for (let i = 0; i < elements.length; i += 1) {\n            const element = elements[i];\n            if ([\"TEMPLATE\", \"SCRIPT\", \"STYLE\"].indexOf(element.tagName) === -1 && element !== node) {\n                cleanup.current.push(setAttribute(element, \"inert\", \"true\"));\n                cleanup.current.push(setAttribute(element, \"aria-hidden\", \"true\"));\n            }\n        }\n        cleanup.current.push(() => {\n            var _a, _b;\n            (_b = (_a = restoreFocus.current) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n        setTimeout(() => {\n            var _a;\n            (_a = on.entered) === null || _a === void 0 ? void 0 : _a.call(on);\n        }, animationDuration);\n    });\n    const handleRef = React.useCallback((node) => {\n        if (node) {\n            handleEnter(node);\n        }\n        else {\n            handleCleanup();\n        }\n    }, [handleEnter, handleCleanup]);\n    return mounted\n        ? createPortal(React.createElement(\"div\", { ref: handleRef, className: clsx(className, cssClass(\"root\"), cssClass(cssPrefix$1()), cssClass(CLASS_NO_SCROLL_PADDING), visible && cssClass(cssPrefix$1(\"open\"))), role: \"presentation\", \"aria-live\": \"polite\", style: {\n                ...(animation.fade !== LightboxDefaultProps.animation.fade\n                    ? { [cssVar(\"fade_animation_duration\")]: `${animationDuration}ms` }\n                    : null),\n                ...(animation.easing.fade !== LightboxDefaultProps.animation.easing.fade\n                    ? { [cssVar(\"fade_animation_timing_function\")]: animation.easing.fade }\n                    : null),\n                ...styles.root,\n            }, onFocus: (event) => {\n                if (!restoreFocus.current) {\n                    restoreFocus.current = event.relatedTarget;\n                }\n            } }, children), portal.root || document.body)\n        : null;\n}\nconst PortalModule = createModule(MODULE_PORTAL, Portal);\n\nfunction Root({ children }) {\n    return React.createElement(React.Fragment, null, children);\n}\nconst RootModule = createModule(MODULE_ROOT, Root);\n\nfunction cssPrefix(value) {\n    return composePrefix(MODULE_TOOLBAR, value);\n}\nfunction Toolbar({ toolbar: { buttons }, render: { buttonClose, iconClose }, styles }) {\n    const { close, setToolbarWidth } = useController();\n    const { setContainerRef, containerRect } = useContainerRect();\n    useLayoutEffect(() => {\n        setToolbarWidth(containerRect === null || containerRect === void 0 ? void 0 : containerRect.width);\n    }, [setToolbarWidth, containerRect === null || containerRect === void 0 ? void 0 : containerRect.width]);\n    const renderCloseButton = () => {\n        if (buttonClose)\n            return buttonClose();\n        return React.createElement(IconButton, { key: ACTION_CLOSE, label: \"Close\", icon: CloseIcon, renderIcon: iconClose, onClick: close });\n    };\n    return (React.createElement(\"div\", { ref: setContainerRef, style: styles.toolbar, className: cssClass(cssPrefix()) }, buttons === null || buttons === void 0 ? void 0 : buttons.map((button) => (button === ACTION_CLOSE ? renderCloseButton() : button))));\n}\nconst ToolbarModule = createModule(MODULE_TOOLBAR, Toolbar);\n\nfunction renderNode(node, props) {\n    var _a;\n    return React.createElement(node.module.component, { key: node.module.name, ...props }, (_a = node.children) === null || _a === void 0 ? void 0 : _a.map((child) => renderNode(child, props)));\n}\nfunction mergeAnimation(defaultAnimation, animation = {}) {\n    const { easing: defaultAnimationEasing, ...restDefaultAnimation } = defaultAnimation;\n    const { easing, ...restAnimation } = animation;\n    return {\n        easing: { ...defaultAnimationEasing, ...easing },\n        ...restDefaultAnimation,\n        ...restAnimation,\n    };\n}\nfunction Lightbox({ carousel, animation, render, toolbar, controller, noScroll, on, plugins, slides, index, ...restProps }) {\n    const { animation: defaultAnimation, carousel: defaultCarousel, render: defaultRender, toolbar: defaultToolbar, controller: defaultController, noScroll: defaultNoScroll, on: defaultOn, slides: defaultSlides, index: defaultIndex, plugins: defaultPlugins, ...restDefaultProps } = LightboxDefaultProps;\n    const { config, augmentation } = withPlugins([\n        createNode(PortalModule, [\n            createNode(NoScrollModule, [\n                createNode(ControllerModule, [\n                    createNode(CarouselModule),\n                    createNode(ToolbarModule),\n                    createNode(NavigationModule),\n                ]),\n            ]),\n        ]),\n    ], plugins || defaultPlugins);\n    const props = augmentation({\n        animation: mergeAnimation(defaultAnimation, animation),\n        carousel: { ...defaultCarousel, ...carousel },\n        render: { ...defaultRender, ...render },\n        toolbar: { ...defaultToolbar, ...toolbar },\n        controller: { ...defaultController, ...controller },\n        noScroll: { ...defaultNoScroll, ...noScroll },\n        on: { ...defaultOn, ...on },\n        ...restDefaultProps,\n        ...restProps,\n    });\n    if (!props.open)\n        return null;\n    return (React.createElement(LightboxPropsProvider, { ...props },\n        React.createElement(LightboxStateProvider, { slides: slides || defaultSlides, index: parseInt(index || defaultIndex) },\n            React.createElement(TimeoutsProvider, null,\n                React.createElement(EventsProvider, null, renderNode(createNode(RootModule, config), props))))));\n}\n\nexport { ACTION_CLOSE, ACTION_NEXT, ACTION_PREV, ACTION_SWIPE, CLASS_FLEX_CENTER, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, CLASS_SLIDE_WRAPPER, Carousel, CarouselModule, CloseIcon, Controller, ControllerContext, ControllerModule, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ErrorIcon, EventsContext, EventsProvider, IMAGE_FIT_CONTAIN, IMAGE_FIT_COVER, IconButton, ImageSlide, Lightbox, LightboxDefaultProps, LightboxDispatchContext, LightboxPropsContext, LightboxPropsProvider, LightboxStateContext, LightboxStateProvider, LoadingIcon, MODULE_CAROUSEL, MODULE_CONTROLLER, MODULE_NAVIGATION, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR, Navigation, NavigationButton, NavigationModule, NextIcon, NoScroll, NoScrollModule, Portal, PortalModule, PreviousIcon, Root, RootModule, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_LOADING, SLIDE_STATUS_PLACEHOLDER, SwipeState, TimeoutsContext, TimeoutsProvider, Toolbar, ToolbarModule, UNKNOWN_ACTION_TYPE, VK_ARROW_LEFT, VK_ARROW_RIGHT, VK_ESCAPE, activeSlideStatus, addToolbarButton, calculatePreload, cleanup, clsx, composePrefix, computeSlideRect, createIcon, createIconDisabled, createModule, createNode, cssClass, cssVar, Lightbox as default, devicePixelRatio, getSlide, getSlideIfPresent, getSlideIndex, hasSlides, hasWindow, isImageFitCover, isImageSlide, label, makeComposePrefix, makeUseContext, parseInt, parseLengthPercentage, round, setRef, stopNavigationEventsPropagation, useAnimation, useContainerRect, useController, useDelay, useEventCallback, useEvents, useForkRef, useKeyboardNavigation, useLayoutEffect, useLightboxDispatch, useLightboxProps, useLightboxState, useLoseFocus, useMotionPreference, useNavigationState, usePointerEvents, usePointerSwipe, usePreventSwipeNavigation, useRTL, useSensors, useThrottle, useTimeouts, useWheelSwipe, withPlugins };"]},"metadata":{},"sourceType":"module"}